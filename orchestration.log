2025-05-12 17:03:12,728 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 17:03:12,728 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 17:03:12,728 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 17:03:12,728 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 17:03:12,728 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 17:03:12,728 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 17:03:12,728 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 17:03:12,729 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 17:03:12,729 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 17:03:40,617 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 17:03:40,617 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDg1NTkzfQ.3XbkHSMBnXWeuZmrkE7iMLw6mtCH4pHdyj_1d8XMpFg'}
2025-05-12 17:03:40,653 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 17:03:40,655 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x107c9a910>
2025-05-12 17:03:40,655 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 17:03:40,656 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 17:03:40,656 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 17:03:40,656 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 17:03:40,656 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 17:03:40,667 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'date', b'Mon, 12 May 2025 21:03:40 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-05-12 17:03:40,669 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 404 Not Found"
2025-05-12 17:03:40,669 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 17:03:40,670 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 17:03:40,670 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 17:03:40,670 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 17:03:40,670 - DEBUG - httpcore.connection - close.started
2025-05-12 17:03:40,671 - DEBUG - httpcore.connection - close.complete
2025-05-12 17:04:03,639 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 17:04:03,640 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDg1NTkzfQ.3XbkHSMBnXWeuZmrkE7iMLw6mtCH4pHdyj_1d8XMpFg'}
2025-05-12 17:04:03,658 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=10 socket_options=None
2025-05-12 17:04:03,659 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x107ca9590>
2025-05-12 17:04:03,660 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 17:04:03,660 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 17:04:03,660 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 17:04:03,660 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 17:04:03,661 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 17:04:13,662 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 17:04:13,663 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 17:04:13,663 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 17:10:30,377 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:10:30,378 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:10:32,840 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:10:32,840 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:10:32,841 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:11:20,159 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:11:20,160 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:11:22,205 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:11:22,205 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:11:22,205 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:11:48,111 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 17:11:48,111 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 17:11:48,112 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 17:11:48,112 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 17:11:48,112 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 17:11:48,112 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 17:11:48,112 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 17:11:48,112 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 17:11:48,112 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 17:12:18,911 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 17:12:18,913 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDg2MTA4fQ.Fp_9vjYx5AoNTku4JiAcK8lTnXVGXBUXqQx0nGNMs5k'}
2025-05-12 17:12:18,958 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 17:12:18,959 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1237bc290>
2025-05-12 17:12:18,960 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 17:12:18,960 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 17:12:18,960 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 17:12:18,960 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 17:12:18,960 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 17:12:18,975 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 21:12:18 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 17:12:18,975 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 17:12:18,975 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 17:12:18,976 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 17:12:18,976 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 17:12:18,976 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 17:12:18,976 - DEBUG - httpcore.connection - close.started
2025-05-12 17:12:18,976 - DEBUG - httpcore.connection - close.complete
2025-05-12 17:13:56,338 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:13:56,338 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:13:58,477 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:13:58,477 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:13:58,477 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:14:22,742 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 17:14:22,743 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 17:14:22,743 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 17:14:22,743 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 17:14:22,743 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 17:14:22,743 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 17:14:22,743 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 17:14:22,743 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 17:14:22,743 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 17:14:33,748 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 17:14:33,748 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDg2MjYzfQ.E_u3zpeF5KP7buvpyv49I1PxFxHPtXjwQ2TDbvBtjfs'}
2025-05-12 17:14:33,775 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 17:14:33,777 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x110a25ad0>
2025-05-12 17:14:33,777 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 17:14:33,777 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 17:14:33,777 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 17:14:33,778 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 17:14:33,778 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 17:14:33,780 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 21:14:33 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 17:14:33,781 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 17:14:33,781 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 17:14:33,781 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 17:14:33,781 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 17:14:33,781 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 17:14:33,781 - DEBUG - httpcore.connection - close.started
2025-05-12 17:14:33,781 - DEBUG - httpcore.connection - close.complete
2025-05-12 17:15:48,073 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:15:48,074 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:15:49,834 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:15:49,834 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:15:49,834 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:16:01,888 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:16:01,888 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:16:04,311 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:16:04,311 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:16:04,311 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:16:14,931 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:16:14,931 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:32:13,591 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:32:13,593 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:32:17,547 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:32:17,547 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:32:17,547 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:32:41,799 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:32:41,799 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:32:45,180 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:32:45,180 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:32:45,180 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:33:13,689 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:33:13,690 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:33:16,840 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:33:16,840 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:33:16,841 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:33:21,564 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:33:21,564 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:33:26,075 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:33:26,075 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:33:26,075 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:33:27,524 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:33:27,524 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:41:36,053 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:41:36,053 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:41:39,724 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:41:39,725 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:41:39,725 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:41:41,281 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:41:41,281 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:41:44,012 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:41:44,013 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:41:44,013 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:44:41,911 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:44:41,911 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:44:44,637 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:44:44,637 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:44:44,637 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:45:10,891 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:45:10,891 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 17:45:14,253 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 17:45:14,253 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 17:45:14,253 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 17:45:54,104 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 17:45:54,105 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:19:39,307 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:19:39,307 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:19:39,307 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:19:43,837 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:19:43,837 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:19:46,089 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:19:46,089 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:19:46,089 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:20:04,623 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:20:04,623 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:20:07,019 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:20:07,019 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:20:07,019 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:20:15,246 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:20:15,246 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:20:17,393 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:20:17,393 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:20:17,393 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:21:20,984 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:21:20,985 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 18:21:20,985 - DEBUG - multipart.multipart - Calling on_field_data with data[9:22]
2025-05-12 18:21:20,985 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:21:20,985 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:21:20,985 - DEBUG - multipart.multipart - Calling on_field_name with data[23:31]
2025-05-12 18:21:20,985 - DEBUG - multipart.multipart - Calling on_field_data with data[32:45]
2025-05-12 18:21:20,985 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:21:20,986 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 18:21:43,601 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:21:43,601 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 18:21:43,602 - DEBUG - multipart.multipart - Calling on_field_data with data[9:22]
2025-05-12 18:21:43,602 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:21:43,602 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:21:43,602 - DEBUG - multipart.multipart - Calling on_field_name with data[23:31]
2025-05-12 18:21:43,602 - DEBUG - multipart.multipart - Calling on_field_data with data[32:43]
2025-05-12 18:21:43,603 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:21:43,603 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 18:23:08,344 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:23:08,348 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 18:23:08,348 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 18:23:08,348 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:23:08,348 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:23:08,349 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 18:23:08,349 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 18:23:08,349 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:23:08,349 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 18:23:13,565 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:23:13,565 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkwMzg4fQ.PqvyckfKFuPEgsFyRJmLmfyiBCJL-iRpZNIb8wHHHus'}
2025-05-12 18:23:33,596 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:23:33,596 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkwMzg4fQ.PqvyckfKFuPEgsFyRJmLmfyiBCJL-iRpZNIb8wHHHus'}
2025-05-12 18:23:33,629 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 18:23:33,629 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114c23ad0>
2025-05-12 18:23:33,630 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 18:23:33,630 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:23:33,630 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 18:23:33,630 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:23:33,630 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 18:23:33,644 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 22:23:32 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2300'), (b'content-type', b'text/plain; charset=utf-8')])
2025-05-12 18:23:33,645 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 18:23:33,645 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 18:23:33,645 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:23:33,645 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:23:33,645 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:23:33,645 - DEBUG - httpcore.connection - close.started
2025-05-12 18:23:33,645 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:27:11,550 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:27:11,551 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:27:13,625 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:27:13,625 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:27:13,625 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:27:14,955 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:27:14,955 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:27:16,866 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:27:16,867 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:27:16,867 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:27:36,313 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:27:36,313 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 18:27:36,313 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 18:27:36,313 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:27:36,313 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:27:36,313 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 18:27:36,313 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 18:27:36,314 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:27:36,314 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 18:27:39,672 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:27:39,672 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkwNjU2fQ.7pyi7t9-ntNfKpc2ILX6P5xMr6g4J0K3n84DpaYAwLY'}
2025-05-12 18:27:39,741 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-66a95ab7-2174-4c26-8268-34238206bdee', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "hi'"}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 18:27:39,742 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 18:27:39,742 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 18:27:39,793 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x109377d10>
2025-05-12 18:27:39,793 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x10932d0a0> server_hostname='api.anthropic.com' timeout=None
2025-05-12 18:27:39,821 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1090ea550>
2025-05-12 18:27:39,821 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 18:27:39,822 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:27:39,822 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 18:27:39,822 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:27:39,822 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 18:27:41,155 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 22:27:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T22:27:40Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T22:27:41Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T22:27:41Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T22:27:40Z'), (b'request-id', b'req_011CP4RYQj2qqTP12vy2Uo8Z'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed583e2dfbc8c6-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 18:27:41,156 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 18:27:41,156 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 18:27:41,156 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:27:41,157 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:27:41,157 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:27:41,157 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 22:27:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T22:27:40Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T22:27:41Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T22:27:41Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T22:27:40Z', 'request-id': 'req_011CP4RYQj2qqTP12vy2Uo8Z', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed583e2dfbc8c6-EWR', 'content-encoding': 'gzip'})
2025-05-12 18:27:41,157 - DEBUG - anthropic._base_client - request_id: req_011CP4RYQj2qqTP12vy2Uo8Z
2025-05-12 18:27:49,463 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:27:49,463 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkwNjU2fQ.7pyi7t9-ntNfKpc2ILX6P5xMr6g4J0K3n84DpaYAwLY'}
2025-05-12 18:27:49,465 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-fb197aa5-b24a-465e-8179-2fc5b61ae813', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'what do you do'}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 18:27:49,466 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 18:27:49,469 - DEBUG - httpcore.connection - close.started
2025-05-12 18:27:49,471 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:27:49,472 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 18:27:49,494 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10938fd10>
2025-05-12 18:27:49,495 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x10932d0a0> server_hostname='api.anthropic.com' timeout=None
2025-05-12 18:27:49,507 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10938bfd0>
2025-05-12 18:27:49,507 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 18:27:49,508 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:27:49,508 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 18:27:49,508 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:27:49,508 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 18:27:52,931 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 22:27:52 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T22:27:50Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T22:27:52Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T22:27:50Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T22:27:50Z'), (b'request-id', b'req_011CP4RZ88RDiZDH1ctgF9zb'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed587abe857c7e-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 18:27:52,932 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 18:27:52,932 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 18:27:52,932 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:27:52,932 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:27:52,932 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:27:52,933 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 22:27:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T22:27:50Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T22:27:52Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T22:27:50Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T22:27:50Z', 'request-id': 'req_011CP4RZ88RDiZDH1ctgF9zb', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed587abe857c7e-EWR', 'content-encoding': 'gzip'})
2025-05-12 18:27:52,933 - DEBUG - anthropic._base_client - request_id: req_011CP4RZ88RDiZDH1ctgF9zb
2025-05-12 18:29:04,037 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:29:04,037 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:29:06,307 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:29:06,308 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:29:06,308 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:29:22,905 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:29:22,905 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 18:29:22,905 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 18:29:22,905 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:29:22,905 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:29:22,905 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 18:29:22,905 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 18:29:22,905 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:29:22,905 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 18:29:29,816 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:29:29,817 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkwNzYzfQ.zv1csRnU1bLYNSnbefuNoPwWzQges4NFQwdmMuNB7Hw'}
2025-05-12 18:29:29,888 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-81676b52-2451-4070-9a8f-f883b2d382d2', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'hi what do you do'}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 18:29:29,889 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 18:29:29,889 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 18:29:29,899 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1112d37d0>
2025-05-12 18:29:29,899 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x111629010> server_hostname='api.anthropic.com' timeout=None
2025-05-12 18:29:29,913 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x111533d90>
2025-05-12 18:29:29,913 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 18:29:29,914 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:29:29,914 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 18:29:29,914 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:29:29,914 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 18:29:33,039 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 22:29:33 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T22:29:30Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T22:29:33Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T22:29:31Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T22:29:30Z'), (b'request-id', b'req_011CP4RgXRam8NFq4sM9Tcqx'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed5aee4ae0c345-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 18:29:33,040 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 18:29:33,041 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 18:29:33,041 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:29:33,041 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:29:33,041 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:29:33,041 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 22:29:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T22:29:30Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T22:29:33Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T22:29:31Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T22:29:30Z', 'request-id': 'req_011CP4RgXRam8NFq4sM9Tcqx', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed5aee4ae0c345-EWR', 'content-encoding': 'gzip'})
2025-05-12 18:29:33,042 - DEBUG - anthropic._base_client - request_id: req_011CP4RgXRam8NFq4sM9Tcqx
2025-05-12 18:31:28,237 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:31:28,238 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:31:31,015 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:31:31,015 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:31:31,016 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:31:41,474 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:31:41,474 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:31:43,651 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:31:43,651 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:31:43,651 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:31:49,994 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:31:49,995 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:31:52,754 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:31:52,754 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:31:52,754 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:31:56,467 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:31:56,467 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:31:58,635 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:31:58,636 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:31:58,636 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:32:28,096 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:32:28,096 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:32:30,452 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:32:30,453 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:32:30,453 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:33:06,030 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:33:06,030 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:33:08,161 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:33:08,161 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:33:08,161 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:33:30,242 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:33:30,243 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 18:33:30,243 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 18:33:30,243 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:33:30,243 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:33:30,243 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 18:33:30,243 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 18:33:30,243 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:33:30,243 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 18:33:33,618 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:33:33,618 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxMDEwfQ.rh1p-HAjI-IN33-36A07lEitXDZSZrntFwkRrfNQX34'}
2025-05-12 18:33:43,910 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:33:43,910 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxMDEwfQ.rh1p-HAjI-IN33-36A07lEitXDZSZrntFwkRrfNQX34'}
2025-05-12 18:33:44,001 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-7f15e846-0e68-48b3-82f3-341eda0e3757', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'What do you do'}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 18:33:44,002 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 18:33:44,005 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 18:33:44,214 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11176fa50>
2025-05-12 18:33:44,214 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x1117315b0> server_hostname='api.anthropic.com' timeout=None
2025-05-12 18:33:44,228 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1116ca9d0>
2025-05-12 18:33:44,228 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 18:33:44,229 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:33:44,229 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 18:33:44,229 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:33:44,229 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 18:33:46,446 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 22:33:46 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T22:33:45Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T22:33:46Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T22:33:45Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'28000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T22:33:45Z'), (b'request-id', b'req_011CP4S1Gk4iC83HdVbGXRdU'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed6123b9867283-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 18:33:46,447 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 18:33:46,448 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 18:33:46,448 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:33:46,448 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:33:46,448 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:33:46,448 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 22:33:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T22:33:45Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T22:33:46Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T22:33:45Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '28000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T22:33:45Z', 'request-id': 'req_011CP4S1Gk4iC83HdVbGXRdU', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed6123b9867283-EWR', 'content-encoding': 'gzip'})
2025-05-12 18:33:46,449 - DEBUG - anthropic._base_client - request_id: req_011CP4S1Gk4iC83HdVbGXRdU
2025-05-12 18:37:37,613 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:37:37,614 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:37:40,230 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:37:40,230 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:37:40,230 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:38:29,081 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:38:29,081 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:38:31,441 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:38:31,441 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:38:31,441 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:38:47,160 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:38:47,161 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 18:38:47,161 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 18:38:47,161 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:38:47,161 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:38:47,161 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 18:38:47,161 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 18:38:47,162 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:38:47,162 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 18:39:08,148 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:39:08,149 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxMzI3fQ.uA1HHSl30hOX1sKAKRIngapaNlIBR3Suu2RphK2Sv5g'}
2025-05-12 18:39:08,306 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-fcb73bc0-90b9-4f95-890d-dbec623de496', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'What do you do\n'}], 'model': 'claude-3-7-sonnet-20250219', 'stop_sequences': ['\nObservation'], 'stream': True, 'system': "\n            You are TaskFin, an intelligent, friendly financial assistant. Your name is TaskFin. Never say you are Claude, Anthropic, or any other AI model. Always answer as TaskFin. If the user asks about your identity, say: 'I am TaskFin, your financial assistant.'\n            You help users with financial tasks (like accounts, payments, payees, subscriptions), but you are also capable of general conversation, small talk, and answering questions about yourself or the world. Always be clear, helpful, and conversational. If the user asks something unrelated to finance, respond naturally and engagingly.\n            \n            You have access to the following tools:\n            delegate_to_financial_agent(task) - Delegate financial tasks to the financial agent\nadd_payee(name: str, type: str = 'friend', email: str = '', phone: str = '', account_number: str = '', bank_name: str = '') -> str - Add a new payee (friend or organization) to the user's payee list\nmake_payment(account_id: str, payee_id: str, amount: float, description: str = '', is_recurring: bool = False, frequency: str = None, end_date: str = None) -> str - Make a payment to a payee from a specified account. Always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\nlist_payees(_: str = '') -> str - List all payees for the current user.\nget_conversation_context(_: str) -> str - Get the current conversation context\nauthenticate_user(username_password) - Authenticate a user with username and password. Input should be 'username,password'\nvalidate_session(access_token: str) -> str - Validate a user session using the access token.\n            Tool names: delegate_to_financial_agent, add_payee, make_payment, list_payees, get_conversation_context, authenticate_user, validate_session\n            \n            When making a payment, always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\n            \n            When you need to use a tool, use the following format:\n            Thought: [your reasoning here]\n            Action: [the tool name, from the list above]\n            Action Input: [the input to the tool]\n            \n            When you want to respond directly to the user, use:\n            Thought: [your reasoning here]\n            Final Answer: [your response here]\n            \n            IMPORTANT:\n            - Only take ONE step at a time.\n            - If you use Action, output ONLY one Action and Action Input, and nothing else.\n            - If you use Final Answer, output ONLY the Final Answer and nothing else.\n            - Do NOT output multiple Actions or both Action and Final Answer in the same response.\n            - If the user asks a general, personal, or small talk question, respond conversationally and do not mention financial tools unless relevant.\n            "}}
2025-05-12 18:39:08,308 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 18:39:08,308 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 18:39:08,331 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1071f6b50>
2025-05-12 18:39:08,331 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x10743dd90> server_hostname='api.anthropic.com' timeout=None
2025-05-12 18:39:08,344 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x106eee490>
2025-05-12 18:39:08,345 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 18:39:08,346 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:39:08,346 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 18:39:08,346 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:39:08,346 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 18:39:09,185 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 22:39:09 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T22:39:10Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T22:39:15Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T22:39:09Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T22:39:10Z'), (b'request-id', b'req_011CP4SRAVT3DonwBP8xhFeP'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed690d88f543b5-EWR')])
2025-05-12 18:39:09,186 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 18:39:09,186 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 22:39:09 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T22:39:10Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T22:39:15Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T22:39:09Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T22:39:10Z', 'request-id': 'req_011CP4SRAVT3DonwBP8xhFeP', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed690d88f543b5-EWR'})
2025-05-12 18:39:09,187 - DEBUG - anthropic._base_client - request_id: req_011CP4SRAVT3DonwBP8xhFeP
2025-05-12 18:39:09,187 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 18:39:11,832 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:39:11,832 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:39:11,832 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:39:34,467 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:39:34,468 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxMzI3fQ.uA1HHSl30hOX1sKAKRIngapaNlIBR3Suu2RphK2Sv5g'}
2025-05-12 18:39:34,492 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 18:39:34,492 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1071cad10>
2025-05-12 18:39:34,493 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 18:39:34,493 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:39:34,493 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 18:39:34,493 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:39:34,493 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 18:39:34,502 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 22:39:33 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2300'), (b'content-type', b'text/plain; charset=utf-8')])
2025-05-12 18:39:34,502 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 18:39:34,502 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 18:39:34,503 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:39:34,503 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:39:34,503 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:39:34,503 - DEBUG - httpcore.connection - close.started
2025-05-12 18:39:34,503 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:40:24,436 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:40:24,436 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxMzI3fQ.uA1HHSl30hOX1sKAKRIngapaNlIBR3Suu2RphK2Sv5g'}
2025-05-12 18:40:24,448 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 18:40:24,449 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1071bd7d0>
2025-05-12 18:40:24,449 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 18:40:24,449 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:40:24,449 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 18:40:24,449 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:40:24,450 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 18:40:24,459 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 22:40:24 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2300'), (b'content-type', b'text/plain; charset=utf-8')])
2025-05-12 18:40:24,460 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 18:40:24,460 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 18:40:24,460 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:40:24,460 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:40:24,460 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:40:24,461 - DEBUG - httpcore.connection - close.started
2025-05-12 18:40:24,461 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:41:32,833 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:41:32,833 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:41:35,674 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:41:35,674 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:41:35,674 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:41:42,167 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:41:42,168 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:41:44,689 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:41:44,689 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:41:44,689 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:42:00,063 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:42:00,063 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:42:02,429 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:42:02,430 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:42:02,430 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:42:30,984 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:42:30,985 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 18:42:30,985 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 18:42:30,985 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:42:30,985 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:42:30,985 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 18:42:30,985 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 18:42:30,985 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:42:30,985 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 18:42:35,138 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:42:35,139 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxNTUxfQ.ngLukNm1215LsGe7xV5zOnhZ2KpAz6Vfz4Gb-q3jufQ'}
2025-05-12 18:43:09,599 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:43:09,600 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxNTUxfQ.ngLukNm1215LsGe7xV5zOnhZ2KpAz6Vfz4Gb-q3jufQ'}
2025-05-12 18:43:09,855 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-b11a8cf9-356a-48f2-a234-fa926865e1e0', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'What do you do\n'}], 'model': 'claude-3-7-sonnet-20250219', 'stop_sequences': ['\nObservation'], 'stream': True, 'system': "\n            You are TaskFin, an intelligent, friendly financial assistant. Your name is TaskFin. Never say you are Claude, Anthropic, or any other AI model. Always answer as TaskFin. If the user asks about your identity, say: 'I am TaskFin, your financial assistant.'\n            You help users with financial tasks (like accounts, payments, payees, subscriptions), but you are also capable of general conversation, small talk, and answering questions about yourself or the world. Always be clear, helpful, and conversational. If the user asks something unrelated to finance, respond naturally and engagingly.\n            \n            You have access to the following tools:\n            delegate_to_financial_agent(task) - Delegate financial tasks to the financial agent\nadd_payee(name: str, type: str = 'friend', email: str = '', phone: str = '', account_number: str = '', bank_name: str = '') -> str - Add a new payee (friend or organization) to the user's payee list\nmake_payment(account_id: str, payee_id: str, amount: float, description: str = '', is_recurring: bool = False, frequency: str = None, end_date: str = None) -> str - Make a payment to a payee from a specified account. Always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\nlist_payees(_: str = '') -> str - List all payees for the current user.\nget_conversation_context(_: str) -> str - Get the current conversation context\nauthenticate_user(username_password) - Authenticate a user with username and password. Input should be 'username,password'\nvalidate_session(access_token: str) -> str - Validate a user session using the access token.\n            Tool names: delegate_to_financial_agent, add_payee, make_payment, list_payees, get_conversation_context, authenticate_user, validate_session\n            \n            When making a payment, always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\n            \n            When you need to use a tool, use the following format:\n            Thought: [your reasoning here]\n            Action: [the tool name, from the list above]\n            Action Input: [the input to the tool]\n            \n            When you want to respond directly to the user, use:\n            Thought: [your reasoning here]\n            Final Answer: [your response here]\n            \n            IMPORTANT:\n            - Only take ONE step at a time.\n            - If you use Action, output ONLY one Action and Action Input, and nothing else.\n            - If you use Final Answer, output ONLY the Final Answer and nothing else.\n            - Do NOT output multiple Actions or both Action and Final Answer in the same response.\n            - If the user asks a general, personal, or small talk question, respond conversationally and do not mention financial tools unless relevant.\n            "}}
2025-05-12 18:43:09,856 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 18:43:09,856 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 18:43:09,882 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x113722e50>
2025-05-12 18:43:09,882 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x11373e060> server_hostname='api.anthropic.com' timeout=None
2025-05-12 18:43:09,915 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11370c1d0>
2025-05-12 18:43:09,916 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 18:43:09,916 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:43:09,916 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 18:43:09,917 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:43:09,917 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 18:43:10,628 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 22:43:10 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T22:43:12Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T22:43:16Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T22:43:11Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T22:43:12Z'), (b'request-id', b'req_011CP4SiyHzpjdKmTPtKmZPV'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed6ef35cc8ddb6-EWR')])
2025-05-12 18:43:10,629 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 18:43:10,629 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 22:43:10 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T22:43:12Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T22:43:16Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T22:43:11Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T22:43:12Z', 'request-id': 'req_011CP4SiyHzpjdKmTPtKmZPV', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed6ef35cc8ddb6-EWR'})
2025-05-12 18:43:10,629 - DEBUG - anthropic._base_client - request_id: req_011CP4SiyHzpjdKmTPtKmZPV
2025-05-12 18:43:10,629 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 18:43:12,821 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:43:12,821 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:43:12,821 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:43:25,303 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:43:25,303 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxNTUxfQ.ngLukNm1215LsGe7xV5zOnhZ2KpAz6Vfz4Gb-q3jufQ'}
2025-05-12 18:43:25,332 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 18:43:25,333 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1136c7390>
2025-05-12 18:43:25,333 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 18:43:25,333 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:43:25,333 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 18:43:25,333 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:43:25,333 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 18:43:25,337 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 22:43:24 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2300'), (b'content-type', b'text/plain; charset=utf-8')])
2025-05-12 18:43:25,338 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 18:43:25,338 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 18:43:25,338 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:43:25,338 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:43:25,338 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:43:25,339 - DEBUG - httpcore.connection - close.started
2025-05-12 18:43:25,339 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:43:33,459 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:43:33,459 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxNTUxfQ.ngLukNm1215LsGe7xV5zOnhZ2KpAz6Vfz4Gb-q3jufQ'}
2025-05-12 18:43:33,493 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-22cc21bc-a0db-4f24-b001-8ea043f3ee5e', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'only past 5\n'}], 'model': 'claude-3-7-sonnet-20250219', 'stop_sequences': ['\nObservation'], 'stream': True, 'system': "\n            You are TaskFin, an intelligent, friendly financial assistant. Your name is TaskFin. Never say you are Claude, Anthropic, or any other AI model. Always answer as TaskFin. If the user asks about your identity, say: 'I am TaskFin, your financial assistant.'\n            You help users with financial tasks (like accounts, payments, payees, subscriptions), but you are also capable of general conversation, small talk, and answering questions about yourself or the world. Always be clear, helpful, and conversational. If the user asks something unrelated to finance, respond naturally and engagingly.\n            \n            You have access to the following tools:\n            delegate_to_financial_agent(task) - Delegate financial tasks to the financial agent\nadd_payee(name: str, type: str = 'friend', email: str = '', phone: str = '', account_number: str = '', bank_name: str = '') -> str - Add a new payee (friend or organization) to the user's payee list\nmake_payment(account_id: str, payee_id: str, amount: float, description: str = '', is_recurring: bool = False, frequency: str = None, end_date: str = None) -> str - Make a payment to a payee from a specified account. Always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\nlist_payees(_: str = '') -> str - List all payees for the current user.\nget_conversation_context(_: str) -> str - Get the current conversation context\nauthenticate_user(username_password) - Authenticate a user with username and password. Input should be 'username,password'\nvalidate_session(access_token: str) -> str - Validate a user session using the access token.\n            Tool names: delegate_to_financial_agent, add_payee, make_payment, list_payees, get_conversation_context, authenticate_user, validate_session\n            \n            When making a payment, always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\n            \n            When you need to use a tool, use the following format:\n            Thought: [your reasoning here]\n            Action: [the tool name, from the list above]\n            Action Input: [the input to the tool]\n            \n            When you want to respond directly to the user, use:\n            Thought: [your reasoning here]\n            Final Answer: [your response here]\n            \n            IMPORTANT:\n            - Only take ONE step at a time.\n            - If you use Action, output ONLY one Action and Action Input, and nothing else.\n            - If you use Final Answer, output ONLY the Final Answer and nothing else.\n            - Do NOT output multiple Actions or both Action and Final Answer in the same response.\n            - If the user asks a general, personal, or small talk question, respond conversationally and do not mention financial tools unless relevant.\n            "}}
2025-05-12 18:43:33,496 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 18:43:33,497 - DEBUG - httpcore.connection - close.started
2025-05-12 18:43:33,497 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:43:33,497 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 18:43:33,508 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1137d2fd0>
2025-05-12 18:43:33,508 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x11373e060> server_hostname='api.anthropic.com' timeout=None
2025-05-12 18:43:33,520 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1137d1c50>
2025-05-12 18:43:33,521 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 18:43:33,521 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:43:33,521 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 18:43:33,522 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:43:33,522 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 18:43:34,358 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 22:43:34 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T22:43:35Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T22:43:40Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T22:43:34Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T22:43:35Z'), (b'request-id', b'req_011CP4SkiEwLuiYBfqReU2UU'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed6f86df4b4f0b-EWR')])
2025-05-12 18:43:34,358 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 18:43:34,359 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 22:43:34 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T22:43:35Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T22:43:40Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T22:43:34Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T22:43:35Z', 'request-id': 'req_011CP4SkiEwLuiYBfqReU2UU', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed6f86df4b4f0b-EWR'})
2025-05-12 18:43:34,359 - DEBUG - anthropic._base_client - request_id: req_011CP4SkiEwLuiYBfqReU2UU
2025-05-12 18:43:34,359 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 18:43:36,649 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:43:36,649 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:43:36,649 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:43:49,246 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:43:49,246 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxNTUxfQ.ngLukNm1215LsGe7xV5zOnhZ2KpAz6Vfz4Gb-q3jufQ'}
2025-05-12 18:43:49,262 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 18:43:49,263 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1137d3250>
2025-05-12 18:43:49,263 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 18:43:49,264 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:43:49,264 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 18:43:49,264 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:43:49,264 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 18:43:49,271 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 22:43:49 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2300'), (b'content-type', b'text/plain; charset=utf-8')])
2025-05-12 18:43:49,271 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 18:43:49,271 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 18:43:49,272 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:43:49,272 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:43:49,272 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:43:49,272 - DEBUG - httpcore.connection - close.started
2025-05-12 18:43:49,272 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:47:05,301 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:47:05,301 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:47:07,327 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:47:07,327 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:47:07,327 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:47:15,215 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:47:15,215 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:47:17,007 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:47:17,007 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:47:17,007 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:48:50,019 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:48:50,020 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:48:51,713 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:48:51,713 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:48:51,713 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:49:09,543 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:49:09,543 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 18:49:09,543 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 18:49:09,543 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:49:09,543 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:49:09,543 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 18:49:09,543 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 18:49:09,544 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:49:09,544 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 18:49:24,861 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:49:24,861 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxOTQ5fQ.UH3wpKcM0YVz_xVliHA8Ezpz_W4fQaZXiwxhMtPrl64'}
2025-05-12 18:49:24,884 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 18:49:24,885 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11921f050>
2025-05-12 18:49:24,885 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 18:49:24,885 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:49:24,885 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 18:49:24,885 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:49:24,885 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 18:49:24,888 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 22:49:24 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2300'), (b'content-type', b'text/plain; charset=utf-8')])
2025-05-12 18:49:24,888 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 18:49:24,888 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 18:49:24,888 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:49:24,888 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:49:24,888 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:49:24,888 - DEBUG - httpcore.connection - close.started
2025-05-12 18:49:24,888 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:49:53,011 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:49:53,011 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkxOTQ5fQ.UH3wpKcM0YVz_xVliHA8Ezpz_W4fQaZXiwxhMtPrl64'}
2025-05-12 18:49:53,023 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 18:49:53,024 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x119232510>
2025-05-12 18:49:53,024 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 18:49:53,024 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:49:53,025 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 18:49:53,025 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:49:53,025 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 18:49:53,027 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 22:49:52 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2300'), (b'content-type', b'text/plain; charset=utf-8')])
2025-05-12 18:49:53,027 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 18:49:53,027 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 18:49:53,027 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:49:53,027 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:49:53,027 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:49:53,027 - DEBUG - httpcore.connection - close.started
2025-05-12 18:49:53,028 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:52:01,887 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:52:01,887 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:52:03,302 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:52:03,303 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:52:03,303 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:52:17,845 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:52:17,845 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:52:19,079 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:52:19,079 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:52:19,079 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:52:21,818 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:52:21,818 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:52:22,961 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:52:22,961 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:52:22,961 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 18:52:34,791 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:52:34,791 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 18:52:34,791 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 18:52:34,791 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:52:34,791 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 18:52:34,791 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 18:52:34,791 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 18:52:34,791 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 18:52:34,791 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 18:52:47,300 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:52:47,300 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyMTU1fQ.fK5DC6VwUGZH4Zd6h3okSow5h8HmOMOlpv6Lf4Wa2CE'}
2025-05-12 18:52:47,318 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 18:52:47,319 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1080a2a90>
2025-05-12 18:52:47,319 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 18:52:47,320 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:52:47,320 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 18:52:47,321 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:52:47,321 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 18:52:47,323 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 22:52:46 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2300'), (b'content-type', b'text/plain; charset=utf-8')])
2025-05-12 18:52:47,324 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 18:52:47,324 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 18:52:47,324 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:52:47,324 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:52:47,324 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:52:47,325 - DEBUG - httpcore.connection - close.started
2025-05-12 18:52:47,325 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:52:58,067 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:52:58,068 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyMTU1fQ.fK5DC6VwUGZH4Zd6h3okSow5h8HmOMOlpv6Lf4Wa2CE'}
2025-05-12 18:52:58,077 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 18:52:58,078 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1080add90>
2025-05-12 18:52:58,078 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 18:52:58,078 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:52:58,078 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 18:52:58,078 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:52:58,078 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 18:52:58,080 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 22:52:57 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2300'), (b'content-type', b'text/plain; charset=utf-8')])
2025-05-12 18:52:58,080 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 18:52:58,080 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 18:52:58,080 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:52:58,081 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:52:58,081 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:52:58,081 - DEBUG - httpcore.connection - close.started
2025-05-12 18:52:58,081 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:54:04,541 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 18:54:04,541 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyMTU1fQ.fK5DC6VwUGZH4Zd6h3okSow5h8HmOMOlpv6Lf4Wa2CE'}
2025-05-12 18:54:04,551 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 18:54:04,552 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1080afc90>
2025-05-12 18:54:04,553 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 18:54:04,553 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 18:54:04,553 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 18:54:04,553 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 18:54:04,553 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 18:54:04,555 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 22:54:04 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2300'), (b'content-type', b'text/plain; charset=utf-8')])
2025-05-12 18:54:04,556 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 18:54:04,556 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 18:54:04,556 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 18:54:04,556 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 18:54:04,556 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 18:54:04,556 - DEBUG - httpcore.connection - close.started
2025-05-12 18:54:04,556 - DEBUG - httpcore.connection - close.complete
2025-05-12 18:59:25,487 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 18:59:25,487 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 18:59:26,781 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 18:59:26,781 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 18:59:26,781 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:00:04,335 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:00:04,335 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:00:05,374 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:00:05,374 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:00:05,374 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:00:34,881 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:00:34,881 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 19:00:34,881 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 19:00:34,881 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:00:34,881 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:00:34,881 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 19:00:34,881 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 19:00:34,881 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:00:34,881 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 19:00:37,949 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:00:37,949 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyNjM1fQ.Q7UbBGRzW3Y1kzXyBqTan9lV8IgSWrjGhVWCvGK1354'}
2025-05-12 19:00:57,258 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:00:57,258 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyNjM1fQ.Q7UbBGRzW3Y1kzXyBqTan9lV8IgSWrjGhVWCvGK1354'}
2025-05-12 19:00:57,278 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:00:57,279 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10a323210>
2025-05-12 19:00:57,279 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:00:57,279 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:00:57,279 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:00:57,280 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:00:57,280 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:00:57,281 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:00:57 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 19:00:57,281 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:00:57,282 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:00:57,282 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:00:57,282 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:00:57,282 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:00:57,282 - DEBUG - httpcore.connection - close.started
2025-05-12 19:00:57,282 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:01:15,946 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:01:15,946 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyNjM1fQ.Q7UbBGRzW3Y1kzXyBqTan9lV8IgSWrjGhVWCvGK1354'}
2025-05-12 19:01:15,952 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:01:15,958 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10a336690>
2025-05-12 19:01:15,959 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:01:15,959 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:01:15,959 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:01:15,959 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:01:15,959 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:01:15,961 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:01:15 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 19:01:15,961 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:01:15,961 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:01:15,961 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:01:15,961 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:01:15,961 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:01:15,961 - DEBUG - httpcore.connection - close.started
2025-05-12 19:01:15,961 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:04:18,742 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:04:18,743 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:04:19,911 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:04:19,911 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:04:19,911 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:04:28,214 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:04:28,214 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:04:29,347 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:04:29,347 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:04:29,348 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:04:55,363 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:04:55,363 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:04:56,456 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:04:56,456 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:04:56,456 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:04:59,247 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:04:59,247 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:05:00,343 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:05:00,343 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:05:00,343 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:05:14,688 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:05:14,688 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 19:05:14,688 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 19:05:14,688 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:05:14,688 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:05:14,688 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 19:05:14,688 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 19:05:14,689 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:05:14,689 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 19:05:21,514 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:05:21,514 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyOTE0fQ.o1DaTBGyp1oxOkJGUZX9YPwnxqnDv8nwpXHoetr06Iw'}
2025-05-12 19:05:42,469 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:05:42,470 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyOTE0fQ.o1DaTBGyp1oxOkJGUZX9YPwnxqnDv8nwpXHoetr06Iw'}
2025-05-12 19:05:42,494 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:05:42,495 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106923690>
2025-05-12 19:05:42,495 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:05:42,495 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:05:42,495 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:05:42,495 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:05:42,496 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:05:42,497 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:05:42 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 19:05:42,497 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:05:42,497 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:05:42,497 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:05:42,497 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:05:42,497 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:05:42,497 - DEBUG - httpcore.connection - close.started
2025-05-12 19:05:42,498 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:05:42,513 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-6427327a-1ae1-4280-81c6-7b0d671d1d68', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'list my past 5 transactions'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 19:05:42,530 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 19:05:42,530 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 19:05:42,613 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106995fd0>
2025-05-12 19:05:42,613 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x106925400> server_hostname='api.anthropic.com' timeout=None
2025-05-12 19:05:42,626 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106995cd0>
2025-05-12 19:05:42,626 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 19:05:42,626 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:05:42,626 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 19:05:42,626 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:05:42,626 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 19:05:45,719 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 23:05:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T23:05:50Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T23:05:45Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T23:05:43Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'25000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T23:05:45Z'), (b'request-id', b'req_011CP4USgYUaKBywffMu5dMx'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed8ff97bc69a1a-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 19:05:45,720 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 19:05:45,720 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 19:05:45,720 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:05:45,720 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:05:45,720 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:05:45,720 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 23:05:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T23:05:50Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T23:05:45Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T23:05:43Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '25000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T23:05:45Z', 'request-id': 'req_011CP4USgYUaKBywffMu5dMx', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed8ff97bc69a1a-EWR', 'content-encoding': 'gzip'})
2025-05-12 19:05:45,720 - DEBUG - anthropic._base_client - request_id: req_011CP4USgYUaKBywffMu5dMx
2025-05-12 19:06:06,642 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:06:06,642 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyOTE0fQ.o1DaTBGyp1oxOkJGUZX9YPwnxqnDv8nwpXHoetr06Iw'}
2025-05-12 19:06:06,652 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:06:06,653 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106923a50>
2025-05-12 19:06:06,653 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:06:06,653 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:06:06,653 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:06:06,654 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:06:06,654 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:06:06,657 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:06:06 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 19:06:06,657 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:06:06,657 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:06:06,657 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:06:06,657 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:06:06,657 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:06:06,657 - DEBUG - httpcore.connection - close.started
2025-05-12 19:06:06,657 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:06:06,658 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-ba35b5e0-eea5-4cf6-9968-6f8f2e044096', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'past 3 transactions over 50$'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 19:06:06,658 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 19:06:06,658 - DEBUG - httpcore.connection - close.started
2025-05-12 19:06:06,659 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:06:06,659 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 19:06:06,690 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1069b5ad0>
2025-05-12 19:06:06,690 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x106925400> server_hostname='api.anthropic.com' timeout=None
2025-05-12 19:06:06,702 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1069b59d0>
2025-05-12 19:06:06,702 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 19:06:06,702 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:06:06,702 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 19:06:06,702 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:06:06,702 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 19:06:09,738 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 23:06:09 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T23:06:15Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T23:06:09Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T23:06:07Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'25000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T23:06:09Z'), (b'request-id', b'req_011CP4UUTTyVyirQVPzcgjT6'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed908ff8b714ed-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 19:06:09,738 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 19:06:09,738 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 19:06:09,738 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:06:09,738 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:06:09,738 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:06:09,738 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 23:06:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T23:06:15Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T23:06:09Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T23:06:07Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '25000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T23:06:09Z', 'request-id': 'req_011CP4UUTTyVyirQVPzcgjT6', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed908ff8b714ed-EWR', 'content-encoding': 'gzip'})
2025-05-12 19:06:09,738 - DEBUG - anthropic._base_client - request_id: req_011CP4UUTTyVyirQVPzcgjT6
2025-05-12 19:06:27,982 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:06:27,982 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyOTE0fQ.o1DaTBGyp1oxOkJGUZX9YPwnxqnDv8nwpXHoetr06Iw'}
2025-05-12 19:06:27,993 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30 socket_options=None
2025-05-12 19:06:27,994 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1069b46d0>
2025-05-12 19:06:27,994 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:06:27,994 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:06:27,994 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:06:27,994 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:06:27,994 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:06:57,995 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 19:06:57,995 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:06:57,995 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:08:58,800 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:08:58,800 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkyOTE0fQ.o1DaTBGyp1oxOkJGUZX9YPwnxqnDv8nwpXHoetr06Iw'}
2025-05-12 19:08:58,809 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:08:58,810 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1006d53d0>
2025-05-12 19:08:58,810 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:08:58,810 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:08:58,810 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:08:58,810 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:08:58,810 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:08:58,811 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:08:58 GMT'), (b'server', b'uvicorn'), (b'content-length', b'216'), (b'content-type', b'application/json')])
2025-05-12 19:08:58,811 - INFO - httpx - HTTP Request: GET http://localhost:8001/accounts?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:08:58,811 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:08:58,811 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:08:58,812 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:08:58,812 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:08:58,812 - DEBUG - httpcore.connection - close.started
2025-05-12 19:08:58,812 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:10:47,454 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:10:47,456 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 19:10:47,456 - DEBUG - multipart.multipart - Calling on_field_data with data[9:22]
2025-05-12 19:10:47,456 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:10:47,456 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:10:47,456 - DEBUG - multipart.multipart - Calling on_field_name with data[23:31]
2025-05-12 19:10:47,456 - DEBUG - multipart.multipart - Calling on_field_data with data[32:43]
2025-05-12 19:10:47,456 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:10:47,456 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 19:14:51,482 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:14:51,483 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:14:53,512 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:14:53,512 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:14:53,512 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:15:09,300 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:15:09,300 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:15:10,524 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:15:10,524 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:15:10,524 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:15:31,637 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:15:31,638 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:15:32,817 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:15:32,817 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:15:32,817 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:15:46,559 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:15:46,559 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 19:15:46,559 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 19:15:46,559 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:15:46,559 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:15:46,559 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 19:15:46,559 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 19:15:46,560 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:15:46,560 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 19:16:13,331 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:16:13,332 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkzNTQ2fQ.H5nG-7jcE7bo24BMiPrNG7MrYpoksR8EHMpDRJfDnRE'}
2025-05-12 19:16:13,362 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:16:13,363 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x107f9efd0>
2025-05-12 19:16:13,363 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:16:13,363 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:16:13,363 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:16:13,363 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:16:13,363 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:16:13,367 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:16:12 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 19:16:13,368 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:16:13,368 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:16:13,368 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:16:13,368 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:16:13,368 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:16:13,368 - DEBUG - httpcore.connection - close.started
2025-05-12 19:16:13,369 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:16:13,381 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-04f38929-c4bf-426f-b4f4-07d87a50b2cb', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'list my past 4 transactions over 15$'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 19:16:13,400 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 19:16:13,400 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 19:16:13,421 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x107ff3e10>
2025-05-12 19:16:13,422 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x107f99520> server_hostname='api.anthropic.com' timeout=None
2025-05-12 19:16:13,436 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108009b10>
2025-05-12 19:16:13,436 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 19:16:13,436 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:16:13,436 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 19:16:13,436 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:16:13,436 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 19:16:16,642 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 23:16:16 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T23:16:21Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T23:16:16Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T23:16:14Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'25000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T23:16:16Z'), (b'request-id', b'req_011CP4VFBZkiF177ZwoshCR6'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed9f600ffa43a4-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 19:16:16,643 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 19:16:16,643 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 19:16:16,643 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:16:16,643 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:16:16,643 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:16:16,643 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 23:16:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T23:16:21Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T23:16:16Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T23:16:14Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '25000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T23:16:16Z', 'request-id': 'req_011CP4VFBZkiF177ZwoshCR6', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed9f600ffa43a4-EWR', 'content-encoding': 'gzip'})
2025-05-12 19:16:16,643 - DEBUG - anthropic._base_client - request_id: req_011CP4VFBZkiF177ZwoshCR6
2025-05-12 19:16:34,763 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:16:34,764 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkzNTQ2fQ.H5nG-7jcE7bo24BMiPrNG7MrYpoksR8EHMpDRJfDnRE'}
2025-05-12 19:16:34,822 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-6a6154b7-68d5-4a95-b6d1-e4cc0c0ef057', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Do you find any trends\n'}], 'model': 'claude-3-7-sonnet-20250219', 'stop_sequences': ['\nObservation'], 'stream': True, 'system': "\n            You are TaskFin, an intelligent, friendly financial assistant. Your name is TaskFin. Never say you are Claude, Anthropic, or any other AI model. Always answer as TaskFin. If the user asks about your identity, say: 'I am TaskFin, your financial assistant.'\n            You help users with financial tasks (like accounts, payments, payees, subscriptions), but you are also capable of general conversation, small talk, and answering questions about yourself or the world. Always be clear, helpful, and conversational. If the user asks something unrelated to finance, respond naturally and engagingly.\n            \n            You have access to the following tools:\n            delegate_to_financial_agent(task) - Delegate financial tasks to the financial agent\nadd_payee(name: str, type: str = 'friend', email: str = '', phone: str = '', account_number: str = '', bank_name: str = '') -> str - Add a new payee (friend or organization) to the user's payee list\nmake_payment(account_id: str, payee_id: str, amount: float, description: str = '', is_recurring: bool = False, frequency: str = None, end_date: str = None) -> str - Make a payment to a payee from a specified account. Always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\nlist_payees(_: str = '') -> str - List all payees for the current user.\nget_conversation_context(_: str) -> str - Get the current conversation context\nauthenticate_user(username_password) - Authenticate a user with username and password. Input should be 'username,password'\nvalidate_session(access_token: str) -> str - Validate a user session using the access token.\n            Tool names: delegate_to_financial_agent, add_payee, make_payment, list_payees, get_conversation_context, authenticate_user, validate_session\n            \n            When making a payment, always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\n            \n            When you need to use a tool, use the following format:\n            Thought: [your reasoning here]\n            Action: [the tool name, from the list above]\n            Action Input: [the input to the tool]\n            \n            When you want to respond directly to the user, use:\n            Thought: [your reasoning here]\n            Final Answer: [your response here]\n            \n            IMPORTANT:\n            - Only take ONE step at a time.\n            - If you use Action, output ONLY one Action and Action Input, and nothing else.\n            - If you use Final Answer, output ONLY the Final Answer and nothing else.\n            - Do NOT output multiple Actions or both Action and Final Answer in the same response.\n            - If the user asks a general, personal, or small talk question, respond conversationally and do not mention financial tools unless relevant.\n            "}}
2025-05-12 19:16:34,823 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 19:16:34,823 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 19:16:34,833 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x107feb850>
2025-05-12 19:16:34,833 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x107f9a330> server_hostname='api.anthropic.com' timeout=None
2025-05-12 19:16:34,846 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x107da4b50>
2025-05-12 19:16:34,846 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 19:16:34,846 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:16:34,846 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 19:16:34,847 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:16:34,847 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 19:16:35,787 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 23:16:35 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T23:16:37Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T23:16:41Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T23:16:36Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T23:16:37Z'), (b'request-id', b'req_011CP4VGm8PTrjD7rstk5ch5'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ed9fe60f1083d0-EWR')])
2025-05-12 19:16:35,788 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 19:16:35,788 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 23:16:35 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T23:16:37Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T23:16:41Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T23:16:36Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T23:16:37Z', 'request-id': 'req_011CP4VGm8PTrjD7rstk5ch5', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ed9fe60f1083d0-EWR'})
2025-05-12 19:16:35,788 - DEBUG - anthropic._base_client - request_id: req_011CP4VGm8PTrjD7rstk5ch5
2025-05-12 19:16:35,788 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 19:16:38,339 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:16:38,339 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:16:38,339 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:16:58,327 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:16:58,327 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkzNTQ2fQ.H5nG-7jcE7bo24BMiPrNG7MrYpoksR8EHMpDRJfDnRE'}
2025-05-12 19:16:58,337 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:16:58,338 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108035f50>
2025-05-12 19:16:58,338 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:16:58,338 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:16:58,338 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:16:58,339 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:16:58,339 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:16:58,341 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:16:57 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 19:16:58,341 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:16:58,341 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:16:58,341 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:16:58,342 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:16:58,342 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:16:58,342 - DEBUG - httpcore.connection - close.started
2025-05-12 19:16:58,342 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:16:58,343 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-47440dda-2b30-4ecb-ba12-84f6c9d4ac7f', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'Do you find any transactions in above transactions'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 19:16:58,345 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 19:16:58,345 - DEBUG - httpcore.connection - close.started
2025-05-12 19:16:58,345 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:16:58,346 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 19:16:58,353 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10805e610>
2025-05-12 19:16:58,354 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x107f99520> server_hostname='api.anthropic.com' timeout=None
2025-05-12 19:16:58,364 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10805e8d0>
2025-05-12 19:16:58,364 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 19:16:58,365 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:16:58,365 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 19:16:58,365 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:16:58,365 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 19:17:03,234 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 23:17:03 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T23:17:06Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T23:17:03Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T23:16:59Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'25000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T23:17:03Z'), (b'request-id', b'req_011CP4VJVboTTwAeSYuGLrLh'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93eda078da11de6d-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 19:17:03,234 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 19:17:03,234 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 19:17:03,235 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:17:03,235 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:17:03,235 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:17:03,235 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 23:17:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T23:17:06Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T23:17:03Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T23:16:59Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '25000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T23:17:03Z', 'request-id': 'req_011CP4VJVboTTwAeSYuGLrLh', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93eda078da11de6d-EWR', 'content-encoding': 'gzip'})
2025-05-12 19:17:03,236 - DEBUG - anthropic._base_client - request_id: req_011CP4VJVboTTwAeSYuGLrLh
2025-05-12 19:17:27,208 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:17:27,208 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkzNTQ2fQ.H5nG-7jcE7bo24BMiPrNG7MrYpoksR8EHMpDRJfDnRE'}
2025-05-12 19:17:27,215 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-82ae2f90-93c9-4a17-8b8e-30ff05146b93', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Do you see any trends in them\n'}], 'model': 'claude-3-7-sonnet-20250219', 'stop_sequences': ['\nObservation'], 'stream': True, 'system': "\n            You are TaskFin, an intelligent, friendly financial assistant. Your name is TaskFin. Never say you are Claude, Anthropic, or any other AI model. Always answer as TaskFin. If the user asks about your identity, say: 'I am TaskFin, your financial assistant.'\n            You help users with financial tasks (like accounts, payments, payees, subscriptions), but you are also capable of general conversation, small talk, and answering questions about yourself or the world. Always be clear, helpful, and conversational. If the user asks something unrelated to finance, respond naturally and engagingly.\n            \n            You have access to the following tools:\n            delegate_to_financial_agent(task) - Delegate financial tasks to the financial agent\nadd_payee(name: str, type: str = 'friend', email: str = '', phone: str = '', account_number: str = '', bank_name: str = '') -> str - Add a new payee (friend or organization) to the user's payee list\nmake_payment(account_id: str, payee_id: str, amount: float, description: str = '', is_recurring: bool = False, frequency: str = None, end_date: str = None) -> str - Make a payment to a payee from a specified account. Always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\nlist_payees(_: str = '') -> str - List all payees for the current user.\nget_conversation_context(_: str) -> str - Get the current conversation context\nauthenticate_user(username_password) - Authenticate a user with username and password. Input should be 'username,password'\nvalidate_session(access_token: str) -> str - Validate a user session using the access token.\n            Tool names: delegate_to_financial_agent, add_payee, make_payment, list_payees, get_conversation_context, authenticate_user, validate_session\n            \n            When making a payment, always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\n            \n            When you need to use a tool, use the following format:\n            Thought: [your reasoning here]\n            Action: [the tool name, from the list above]\n            Action Input: [the input to the tool]\n            \n            When you want to respond directly to the user, use:\n            Thought: [your reasoning here]\n            Final Answer: [your response here]\n            \n            IMPORTANT:\n            - Only take ONE step at a time.\n            - If you use Action, output ONLY one Action and Action Input, and nothing else.\n            - If you use Final Answer, output ONLY the Final Answer and nothing else.\n            - Do NOT output multiple Actions or both Action and Final Answer in the same response.\n            - If the user asks a general, personal, or small talk question, respond conversationally and do not mention financial tools unless relevant.\n            "}}
2025-05-12 19:17:27,216 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 19:17:27,216 - DEBUG - httpcore.connection - close.started
2025-05-12 19:17:27,217 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:17:27,217 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 19:17:27,244 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x107f06790>
2025-05-12 19:17:27,244 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x107f9a330> server_hostname='api.anthropic.com' timeout=None
2025-05-12 19:17:27,256 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10805f610>
2025-05-12 19:17:27,256 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 19:17:27,257 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:17:27,257 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 19:17:27,257 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:17:27,257 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 19:17:28,196 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 23:17:28 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T23:17:29Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T23:17:34Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T23:17:28Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T23:17:29Z'), (b'request-id', b'req_011CP4VLd8nVPewR29bP34XC'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93eda12d6b1223ce-EWR')])
2025-05-12 19:17:28,196 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 19:17:28,196 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 23:17:28 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T23:17:29Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T23:17:34Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T23:17:28Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T23:17:29Z', 'request-id': 'req_011CP4VLd8nVPewR29bP34XC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93eda12d6b1223ce-EWR'})
2025-05-12 19:17:28,196 - DEBUG - anthropic._base_client - request_id: req_011CP4VLd8nVPewR29bP34XC
2025-05-12 19:17:28,196 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 19:17:29,015 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:17:29,015 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:17:29,015 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:17:29,018 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-334f868c-ae36-4f77-bae9-49db0e142be2', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Do you see any trends in them\nThought: The user is asking about trends but hasn\'t specified what "them" refers to. Since this is a vague question without context, I should first check the conversation context to understand what they might be referring to.\n\nAction: get_conversation_context\nAction Input: \nObservation: {\'history\': \'\'}\nThought: '}], 'model': 'claude-3-7-sonnet-20250219', 'stop_sequences': ['\nObservation'], 'stream': True, 'system': "\n            You are TaskFin, an intelligent, friendly financial assistant. Your name is TaskFin. Never say you are Claude, Anthropic, or any other AI model. Always answer as TaskFin. If the user asks about your identity, say: 'I am TaskFin, your financial assistant.'\n            You help users with financial tasks (like accounts, payments, payees, subscriptions), but you are also capable of general conversation, small talk, and answering questions about yourself or the world. Always be clear, helpful, and conversational. If the user asks something unrelated to finance, respond naturally and engagingly.\n            \n            You have access to the following tools:\n            delegate_to_financial_agent(task) - Delegate financial tasks to the financial agent\nadd_payee(name: str, type: str = 'friend', email: str = '', phone: str = '', account_number: str = '', bank_name: str = '') -> str - Add a new payee (friend or organization) to the user's payee list\nmake_payment(account_id: str, payee_id: str, amount: float, description: str = '', is_recurring: bool = False, frequency: str = None, end_date: str = None) -> str - Make a payment to a payee from a specified account. Always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\nlist_payees(_: str = '') -> str - List all payees for the current user.\nget_conversation_context(_: str) -> str - Get the current conversation context\nauthenticate_user(username_password) - Authenticate a user with username and password. Input should be 'username,password'\nvalidate_session(access_token: str) -> str - Validate a user session using the access token.\n            Tool names: delegate_to_financial_agent, add_payee, make_payment, list_payees, get_conversation_context, authenticate_user, validate_session\n            \n            When making a payment, always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\n            \n            When you need to use a tool, use the following format:\n            Thought: [your reasoning here]\n            Action: [the tool name, from the list above]\n            Action Input: [the input to the tool]\n            \n            When you want to respond directly to the user, use:\n            Thought: [your reasoning here]\n            Final Answer: [your response here]\n            \n            IMPORTANT:\n            - Only take ONE step at a time.\n            - If you use Action, output ONLY one Action and Action Input, and nothing else.\n            - If you use Final Answer, output ONLY the Final Answer and nothing else.\n            - Do NOT output multiple Actions or both Action and Final Answer in the same response.\n            - If the user asks a general, personal, or small talk question, respond conversationally and do not mention financial tools unless relevant.\n            "}}
2025-05-12 19:17:29,019 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 19:17:29,019 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 19:17:29,019 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:17:29,019 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 19:17:29,019 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:17:29,019 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 19:17:29,762 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 23:17:29 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T23:17:32Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T23:17:35Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T23:17:30Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T23:17:32Z'), (b'request-id', b'req_011CP4VLkeUeDRn7gisZUqHG'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93eda1386f5e23ce-EWR')])
2025-05-12 19:17:29,763 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 19:17:29,763 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 23:17:29 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T23:17:32Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T23:17:35Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T23:17:30Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T23:17:32Z', 'request-id': 'req_011CP4VLkeUeDRn7gisZUqHG', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93eda1386f5e23ce-EWR'})
2025-05-12 19:17:29,763 - DEBUG - anthropic._base_client - request_id: req_011CP4VLkeUeDRn7gisZUqHG
2025-05-12 19:17:29,763 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 19:17:31,558 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:17:31,558 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:17:31,558 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:17:45,126 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:17:45,126 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkzNTQ2fQ.H5nG-7jcE7bo24BMiPrNG7MrYpoksR8EHMpDRJfDnRE'}
2025-05-12 19:17:45,136 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:17:45,136 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10805dcd0>
2025-05-12 19:17:45,137 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:17:45,137 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:17:45,137 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:17:45,137 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:17:45,137 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:17:45,139 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:17:44 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 19:17:45,139 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:17:45,139 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:17:45,139 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:17:45,139 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:17:45,139 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:17:45,140 - DEBUG - httpcore.connection - close.started
2025-05-12 19:17:45,140 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:17:45,140 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-8d1a4b81-84fd-499a-b645-bb135c0e2518', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'Do you see any trends in my transactions'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 19:17:45,142 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 19:17:45,142 - DEBUG - httpcore.connection - close.started
2025-05-12 19:17:45,142 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:17:45,143 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 19:17:45,176 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108073c10>
2025-05-12 19:17:45,176 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x107f99520> server_hostname='api.anthropic.com' timeout=None
2025-05-12 19:17:45,186 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108073b10>
2025-05-12 19:17:45,186 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 19:17:45,186 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:17:45,186 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 19:17:45,186 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:17:45,186 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 19:17:51,778 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 23:17:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T23:17:53Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T23:17:51Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T23:17:46Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'25000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T23:17:51Z'), (b'request-id', b'req_011CP4VMwsSffQnGiBEBm8C3'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93eda19d7c4c334e-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 19:17:51,779 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 19:17:51,779 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 19:17:51,779 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:17:51,779 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:17:51,779 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:17:51,779 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 23:17:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T23:17:53Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T23:17:51Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T23:17:46Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '25000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T23:17:51Z', 'request-id': 'req_011CP4VMwsSffQnGiBEBm8C3', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93eda19d7c4c334e-EWR', 'content-encoding': 'gzip'})
2025-05-12 19:17:51,779 - DEBUG - anthropic._base_client - request_id: req_011CP4VMwsSffQnGiBEBm8C3
2025-05-12 19:18:12,865 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:18:12,865 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDkzNTQ2fQ.H5nG-7jcE7bo24BMiPrNG7MrYpoksR8EHMpDRJfDnRE'}
2025-05-12 19:18:12,873 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=20 socket_options=None
2025-05-12 19:18:12,874 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108073290>
2025-05-12 19:18:12,874 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:18:12,875 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:18:12,876 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:18:12,876 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:18:12,876 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:18:32,877 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 19:18:32,877 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:18:32,877 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:18:32,884 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=5 socket_options=None
2025-05-12 19:18:32,885 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10807e490>
2025-05-12 19:18:32,885 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:18:32,885 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:18:32,885 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:18:32,885 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:18:32,885 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:18:37,885 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 19:18:37,885 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:18:37,885 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:18:37,892 - DEBUG - httpcore.connection - connect_tcp.started host='host.docker.internal' port=8000 local_address=None timeout=5 socket_options=None
2025-05-12 19:18:37,906 - DEBUG - httpcore.connection - connect_tcp.failed exception=ConnectError(gaierror(8, 'nodename nor servname provided, or not known'))
2025-05-12 19:18:37,915 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:18:37,915 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 19:18:37,915 - DEBUG - multipart.multipart - Calling on_field_data with data[9:22]
2025-05-12 19:18:37,915 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:18:37,915 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:18:37,915 - DEBUG - multipart.multipart - Calling on_field_name with data[23:31]
2025-05-12 19:18:37,915 - DEBUG - multipart.multipart - Calling on_field_data with data[32:43]
2025-05-12 19:18:37,915 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:18:37,915 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 19:24:10,252 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:24:10,253 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:24:11,590 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:24:11,590 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:24:11,590 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:30:18,016 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:30:18,016 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:30:19,461 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:30:19,461 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:30:19,461 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:30:22,198 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:30:22,198 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:30:23,362 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:30:23,362 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:30:23,362 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:42:08,242 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:42:08,243 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 19:42:08,243 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 19:42:08,243 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:42:08,243 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 19:42:08,244 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 19:42:08,244 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 19:42:08,244 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 19:42:08,244 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 19:42:32,148 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:42:32,148 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk1MTI4fQ.yJYJx30u6mgkzNZaXizy1Ogxo-5-vmbqmimLgDXj7ek'}
2025-05-12 19:42:32,176 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:42:32,176 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1098674d0>
2025-05-12 19:42:32,177 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:42:32,177 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:42:32,177 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:42:32,177 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:42:32,177 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:42:32,182 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:42:31 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 19:42:32,182 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:42:32,182 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:42:32,182 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:42:32,182 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:42:32,182 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:42:32,182 - DEBUG - httpcore.connection - close.started
2025-05-12 19:42:32,183 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:42:32,196 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-69206f8b-57cf-4747-bf25-6c9a539961ac', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'list my transactions'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 19:42:32,211 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 19:42:32,211 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 19:42:32,310 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1098b7e10>
2025-05-12 19:42:32,310 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x109861490> server_hostname='api.anthropic.com' timeout=None
2025-05-12 19:42:32,342 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1098cda90>
2025-05-12 19:42:32,342 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 19:42:32,342 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:42:32,342 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 19:42:32,343 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:42:32,343 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 19:42:38,214 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 23:42:38 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T23:42:40Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T23:42:38Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T23:42:33Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'25000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T23:42:38Z'), (b'request-id', b'req_011CP4XFZzrzRCon48n5QHdP'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93edc5ec3bd5b9c6-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 19:42:38,215 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 19:42:38,215 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 19:42:38,215 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:42:38,215 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:42:38,215 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:42:38,215 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 23:42:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T23:42:40Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T23:42:38Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T23:42:33Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '25000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T23:42:38Z', 'request-id': 'req_011CP4XFZzrzRCon48n5QHdP', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93edc5ec3bd5b9c6-EWR', 'content-encoding': 'gzip'})
2025-05-12 19:42:38,216 - DEBUG - anthropic._base_client - request_id: req_011CP4XFZzrzRCon48n5QHdP
2025-05-12 19:43:08,699 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:43:08,699 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk1MTI4fQ.yJYJx30u6mgkzNZaXizy1Ogxo-5-vmbqmimLgDXj7ek'}
2025-05-12 19:43:08,712 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:43:08,713 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1098cf350>
2025-05-12 19:43:08,714 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:43:08,714 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:43:08,714 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:43:08,714 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:43:08,714 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:43:08,716 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:43:07 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 19:43:08,716 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:43:08,716 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:43:08,716 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:43:08,716 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:43:08,716 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:43:08,716 - DEBUG - httpcore.connection - close.started
2025-05-12 19:43:08,716 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:43:08,717 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-6e05728c-4c04-4850-96e3-17b7c215c4f2', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'Do you know to whom the transactions are made to'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 19:43:08,718 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 19:43:08,718 - DEBUG - httpcore.connection - close.started
2025-05-12 19:43:08,719 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:43:08,719 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 19:43:08,802 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1098e9a90>
2025-05-12 19:43:08,802 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x109861490> server_hostname='api.anthropic.com' timeout=None
2025-05-12 19:43:08,814 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1098e9990>
2025-05-12 19:43:08,814 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 19:43:08,814 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:43:08,814 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 19:43:08,814 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:43:08,814 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 19:43:16,025 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Mon, 12 May 2025 23:43:15 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-12T23:43:17Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-12T23:43:15Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-12T23:43:10Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-12T23:43:15Z'), (b'request-id', b'req_011CP4XJFyUznzhjpDMvrZNz'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93edc6d02d418c90-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 19:43:16,025 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 19:43:16,025 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 19:43:16,025 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:43:16,025 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:43:16,025 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:43:16,025 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Mon, 12 May 2025 23:43:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-12T23:43:17Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-12T23:43:15Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-12T23:43:10Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-05-12T23:43:15Z', 'request-id': 'req_011CP4XJFyUznzhjpDMvrZNz', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93edc6d02d418c90-EWR', 'content-encoding': 'gzip'})
2025-05-12 19:43:16,025 - DEBUG - anthropic._base_client - request_id: req_011CP4XJFyUznzhjpDMvrZNz
2025-05-12 19:44:17,210 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:44:17,211 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk1MTI4fQ.yJYJx30u6mgkzNZaXizy1Ogxo-5-vmbqmimLgDXj7ek'}
2025-05-12 19:44:17,221 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 19:44:17,222 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1098ea450>
2025-05-12 19:44:17,222 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:44:17,222 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:44:17,222 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:44:17,222 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:44:17,222 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:44:17,224 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Mon, 12 May 2025 23:44:16 GMT'), (b'server', b'uvicorn'), (b'content-length', b'216'), (b'content-type', b'application/json')])
2025-05-12 19:44:17,224 - INFO - httpx - HTTP Request: GET http://localhost:8001/accounts?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 19:44:17,224 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 19:44:17,224 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 19:44:17,224 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:44:17,224 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:44:17,224 - DEBUG - httpcore.connection - close.started
2025-05-12 19:44:17,224 - DEBUG - httpcore.connection - close.complete
2025-05-12 19:44:31,951 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 19:44:31,951 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk1MTI4fQ.yJYJx30u6mgkzNZaXizy1Ogxo-5-vmbqmimLgDXj7ek'}
2025-05-12 19:44:31,962 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=20 socket_options=None
2025-05-12 19:44:31,964 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1098ebc10>
2025-05-12 19:44:31,964 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:44:31,964 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:44:31,964 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:44:31,965 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:44:31,965 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:44:51,966 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 19:44:51,966 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:44:51,966 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:44:52,009 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=5 socket_options=None
2025-05-12 19:44:52,010 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10988ed50>
2025-05-12 19:44:52,010 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 19:44:52,010 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 19:44:52,010 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 19:44:52,010 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 19:44:52,011 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 19:44:57,011 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 19:44:57,011 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 19:44:57,011 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 19:44:57,017 - DEBUG - httpcore.connection - connect_tcp.started host='host.docker.internal' port=8000 local_address=None timeout=5 socket_options=None
2025-05-12 19:44:57,024 - DEBUG - httpcore.connection - connect_tcp.failed exception=ConnectError(gaierror(8, 'nodename nor servname provided, or not known'))
2025-05-12 19:59:32,326 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:59:32,327 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:59:32,327 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 19:59:32,337 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 19:59:32,337 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 19:59:44,406 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 19:59:44,406 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 19:59:44,406 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 20:01:14,024 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 20:01:14,024 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 20:01:14,024 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 20:02:34,799 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 20:02:34,799 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 20:02:34,799 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 20:02:34,799 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 20:02:34,799 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 20:02:34,799 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 20:02:34,799 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 20:02:34,800 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 20:02:34,800 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 20:03:02,538 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 20:03:02,538 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk2MzU1fQ.qbdhRaaN0QV6aBC0lnKE8w7vHpqbesd3wy3wynxvKJU'}
2025-05-12 20:03:02,564 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=20 socket_options=None
2025-05-12 20:03:02,566 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10cb44ad0>
2025-05-12 20:03:02,566 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 20:03:02,566 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 20:03:02,566 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 20:03:02,566 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 20:03:02,566 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 20:03:22,568 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 20:03:22,568 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 20:03:22,568 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 20:03:22,574 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=5 socket_options=None
2025-05-12 20:03:22,575 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10cf353d0>
2025-05-12 20:03:22,575 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 20:03:22,575 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 20:03:22,575 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 20:03:22,575 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 20:03:22,575 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 20:03:27,576 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 20:03:27,576 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 20:03:27,576 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 20:03:27,588 - DEBUG - httpcore.connection - connect_tcp.started host='host.docker.internal' port=8000 local_address=None timeout=5 socket_options=None
2025-05-12 20:03:27,710 - DEBUG - httpcore.connection - connect_tcp.failed exception=ConnectError(gaierror(8, 'nodename nor servname provided, or not known'))
2025-05-12 20:05:20,815 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 20:05:20,815 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 20:05:22,014 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 20:05:22,014 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 20:05:22,014 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 20:17:24,047 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 20:17:24,048 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk2MzU1fQ.qbdhRaaN0QV6aBC0lnKE8w7vHpqbesd3wy3wynxvKJU'}
2025-05-12 20:17:24,080 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 20:17:24,081 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b57ea10>
2025-05-12 20:17:24,081 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 20:17:24,082 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 20:17:24,082 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 20:17:24,082 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 20:17:24,082 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 20:17:24,114 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Tue, 13 May 2025 00:17:23 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 20:17:24,115 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 20:17:24,115 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 20:17:24,115 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 20:17:24,115 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 20:17:24,115 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 20:17:24,115 - DEBUG - httpcore.connection - close.started
2025-05-12 20:17:24,115 - DEBUG - httpcore.connection - close.complete
2025-05-12 20:17:24,125 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-68dd56c3-d732-4bbf-bbc6-bd41882c0b84', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'list my transactions'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 20:17:24,142 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 20:17:24,142 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 20:17:24,369 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b863110>
2025-05-12 20:17:24,370 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b80d1c0> server_hostname='api.anthropic.com' timeout=None
2025-05-12 20:17:24,386 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b811710>
2025-05-12 20:17:24,386 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 20:17:24,387 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 20:17:24,387 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 20:17:24,387 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 20:17:24,387 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 20:17:37,638 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 13 May 2025 00:17:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-13T00:17:35Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-13T00:17:37Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-13T00:17:25Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'27000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-13T00:17:35Z'), (b'request-id', b'req_011CP4ZunjNfNq9XJvXWnoeA'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93edf8ffee054373-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 20:17:37,638 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 20:17:37,638 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 20:17:37,638 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 20:17:37,638 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 20:17:37,638 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 20:17:37,638 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Tue, 13 May 2025 00:17:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-13T00:17:35Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-13T00:17:37Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-13T00:17:25Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '27000', 'anthropic-ratelimit-tokens-reset': '2025-05-13T00:17:35Z', 'request-id': 'req_011CP4ZunjNfNq9XJvXWnoeA', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93edf8ffee054373-EWR', 'content-encoding': 'gzip'})
2025-05-12 20:17:37,639 - DEBUG - anthropic._base_client - request_id: req_011CP4ZunjNfNq9XJvXWnoeA
2025-05-12 20:17:41,144 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 20:17:41,145 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk2MzU1fQ.qbdhRaaN0QV6aBC0lnKE8w7vHpqbesd3wy3wynxvKJU'}
2025-05-12 20:17:41,153 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 20:17:41,154 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b813050>
2025-05-12 20:17:41,154 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 20:17:41,154 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 20:17:41,154 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 20:17:41,154 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 20:17:41,154 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 20:17:41,155 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Tue, 13 May 2025 00:17:40 GMT'), (b'server', b'uvicorn'), (b'content-length', b'216'), (b'content-type', b'application/json')])
2025-05-12 20:17:41,155 - INFO - httpx - HTTP Request: GET http://localhost:8001/accounts?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 20:17:41,156 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 20:17:41,156 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 20:17:41,156 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 20:17:41,156 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 20:17:41,156 - DEBUG - httpcore.connection - close.started
2025-05-12 20:17:41,156 - DEBUG - httpcore.connection - close.complete
2025-05-12 20:20:43,166 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 20:20:43,166 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 20:20:44,584 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 20:20:44,584 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 20:20:44,584 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 20:21:19,440 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 20:21:19,440 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 20:21:20,738 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 20:21:20,738 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 20:21:20,738 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 20:38:19,228 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 20:38:19,230 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 20:38:20,426 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 20:38:20,426 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 20:38:20,426 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 20:38:27,312 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 20:38:27,312 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 20:38:28,363 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 20:38:28,363 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 20:38:28,363 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 20:38:30,902 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 20:38:30,903 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 20:38:31,991 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 20:38:31,991 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 20:38:31,992 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 20:38:47,490 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 20:38:47,490 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 20:38:47,490 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 20:38:47,490 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 20:38:47,490 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 20:38:47,490 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 20:38:47,490 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 20:38:47,490 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 20:38:47,490 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 20:38:56,665 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 20:38:56,665 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk4NTI3fQ.JjckRdBY6UgdqnIL3HXL1dfBINOicvoh7Fl-KKVcZ0E'}
2025-05-12 20:38:56,693 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 20:38:56,694 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1065aeb50>
2025-05-12 20:38:56,694 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 20:38:56,695 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 20:38:56,695 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 20:38:56,695 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 20:38:56,695 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 20:38:56,697 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Tue, 13 May 2025 00:38:56 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 20:38:56,697 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 20:38:56,697 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 20:38:56,698 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 20:38:56,698 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 20:38:56,698 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 20:38:56,698 - DEBUG - httpcore.connection - close.started
2025-05-12 20:38:56,698 - DEBUG - httpcore.connection - close.complete
2025-05-12 20:38:56,711 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-80f61c7c-3902-4c16-a59f-b3dcde9046d7', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'list my transactions'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 20:38:56,724 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 20:38:56,725 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 20:38:56,863 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10661d7d0>
2025-05-12 20:38:56,864 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x1065a9490> server_hostname='api.anthropic.com' timeout=None
2025-05-12 20:38:56,876 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10661d690>
2025-05-12 20:38:56,876 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 20:38:56,876 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 20:38:56,876 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 20:38:56,876 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 20:38:56,876 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 20:39:04,446 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 13 May 2025 00:39:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-13T00:39:05Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-13T00:39:04Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-13T00:38:58Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-13T00:39:04Z'), (b'request-id', b'req_011CP4bZ4ypy8gzTMtwF1X5J'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ee188e4ff67611-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 20:39:04,446 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 20:39:04,446 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 20:39:04,447 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 20:39:04,447 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 20:39:04,447 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 20:39:04,447 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Tue, 13 May 2025 00:39:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-13T00:39:05Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-13T00:39:04Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-13T00:38:58Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-05-13T00:39:04Z', 'request-id': 'req_011CP4bZ4ypy8gzTMtwF1X5J', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ee188e4ff67611-EWR', 'content-encoding': 'gzip'})
2025-05-12 20:39:04,447 - DEBUG - anthropic._base_client - request_id: req_011CP4bZ4ypy8gzTMtwF1X5J
2025-05-12 20:39:15,050 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 20:39:15,051 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk4NTI3fQ.JjckRdBY6UgdqnIL3HXL1dfBINOicvoh7Fl-KKVcZ0E'}
2025-05-12 20:39:15,062 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=20 socket_options=None
2025-05-12 20:39:15,063 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106606e10>
2025-05-12 20:39:15,063 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 20:39:15,063 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 20:39:15,063 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 20:39:15,063 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 20:39:15,063 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 20:39:35,064 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 20:39:35,064 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 20:39:35,064 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 20:48:48,650 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 20:48:48,650 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 20:48:50,156 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 20:48:50,156 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 20:48:50,156 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 20:53:27,317 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 20:53:27,317 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 20:53:27,317 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 20:53:27,317 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 20:53:27,317 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 20:53:27,317 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 20:53:27,317 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 20:53:27,317 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 20:53:27,318 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 20:53:34,365 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 20:53:34,365 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk5NDA3fQ.Wv0e5b6ACTglYgCu5JXr_1qyDu4v723fBjqa_4iHDo0'}
2025-05-12 20:53:34,393 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=20 socket_options=None
2025-05-12 20:53:34,393 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b227150>
2025-05-12 20:53:34,394 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 20:53:34,394 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 20:53:34,394 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 20:53:34,394 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 20:53:34,394 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 20:53:54,394 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 20:53:54,394 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 20:53:54,394 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 20:53:59,942 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 20:53:59,942 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 20:54:01,146 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 20:54:01,146 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 20:54:01,147 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 20:54:21,457 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 20:54:21,457 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 20:54:21,457 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 20:54:21,457 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 20:54:21,457 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 20:54:21,457 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 20:54:21,457 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 20:54:21,457 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 20:54:21,457 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 20:54:24,412 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 20:54:24,412 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk5NDYxfQ.zX4EMsmMjGPuwE8SD-PpYpgcd3lHbQrHszvsDli_YZs'}
2025-05-12 20:54:24,438 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=20 socket_options=None
2025-05-12 20:54:24,438 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10e544ad0>
2025-05-12 20:54:24,439 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 20:54:24,439 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 20:54:24,439 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 20:54:24,439 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 20:54:24,439 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 20:54:44,439 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 20:54:44,440 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 20:54:44,440 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 20:59:31,463 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 20:59:31,463 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 21:00:50,115 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 21:00:50,115 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 21:00:50,116 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 21:00:50,129 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 21:00:50,129 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 21:00:50,129 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 21:00:50,129 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 21:00:50,129 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 21:00:50,129 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 21:00:50,129 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 21:00:50,129 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 21:00:50,129 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 21:00:50,132 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 21:00:50,132 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 21:00:50,132 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 21:00:50,132 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 21:00:50,132 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 21:00:50,132 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 21:00:50,132 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 21:00:50,132 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 21:00:50,132 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 21:01:09,526 - INFO - orchestration.services.task_scheduler - Stopping task scheduler
2025-05-12 21:01:09,526 - INFO - orchestration.api.main - Task scheduler stopped
2025-05-12 21:01:10,579 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-05-12 21:01:10,579 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-05-12 21:01:10,579 - INFO - orchestration.api.main - Task scheduler started
2025-05-12 21:01:30,115 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 21:01:30,115 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 21:01:30,115 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-05-12 21:01:30,115 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 21:01:30,116 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 21:01:30,116 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-05-12 21:01:30,116 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-05-12 21:01:30,116 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 21:01:30,116 - DEBUG - multipart.multipart - Calling on_end with no data
2025-05-12 21:04:14,570 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 21:04:14,571 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk5ODkwfQ.mmM0-a-Hhc0387jA4BmEtl_1AedtTITL0HIiE-iqQQs'}
2025-05-12 21:04:21,775 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 21:04:21,776 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk5ODkwfQ.mmM0-a-Hhc0387jA4BmEtl_1AedtTITL0HIiE-iqQQs'}
2025-05-12 21:04:21,896 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-3564e815-dba4-4dec-98cd-ac2b7544dd8e', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'what do you do\n'}], 'model': 'claude-3-7-sonnet-20250219', 'stop_sequences': ['\nObservation'], 'stream': True, 'system': "\n            You are TaskFin, an intelligent, friendly financial assistant. Your name is TaskFin. Never say you are Claude, Anthropic, or any other AI model. Always answer as TaskFin. If the user asks about your identity, say: 'I am TaskFin, your financial assistant.'\n            You help users with financial tasks (like accounts, payments, payees, subscriptions), but you are also capable of general conversation, small talk, and answering questions about yourself or the world. Always be clear, helpful, and conversational. If the user asks something unrelated to finance, respond naturally and engagingly.\n            \n            You have access to the following tools:\n            delegate_to_financial_agent(task) - Delegate financial tasks to the financial agent\nadd_payee(name: str, type: str = 'friend', email: str = '', phone: str = '', account_number: str = '', bank_name: str = '') -> str - Add a new payee (friend or organization) to the user's payee list\nmake_payment(account_id: str, payee_id: str, amount: float, description: str = '', is_recurring: bool = False, frequency: str = None, end_date: str = None) -> str - Make a payment to a payee from a specified account. Always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\nlist_payees(_: str = '') -> str - List all payees for the current user.\nget_conversation_context(_: str) -> str - Get the current conversation context\nauthenticate_user(username_password) - Authenticate a user with username and password. Input should be 'username,password'\nvalidate_session(access_token: str) -> str - Validate a user session using the access token.\n            Tool names: delegate_to_financial_agent, add_payee, make_payment, list_payees, get_conversation_context, authenticate_user, validate_session\n            \n            When making a payment, always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\n            \n            When you need to use a tool, use the following format:\n            Thought: [your reasoning here]\n            Action: [the tool name, from the list above]\n            Action Input: [the input to the tool]\n            \n            When you want to respond directly to the user, use:\n            Thought: [your reasoning here]\n            Final Answer: [your response here]\n            \n            IMPORTANT:\n            - Only take ONE step at a time.\n            - If you use Action, output ONLY one Action and Action Input, and nothing else.\n            - If you use Final Answer, output ONLY the Final Answer and nothing else.\n            - Do NOT output multiple Actions or both Action and Final Answer in the same response.\n            - If the user asks a general, personal, or small talk question, respond conversationally and do not mention financial tools unless relevant.\n            "}}
2025-05-12 21:04:21,897 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 21:04:21,898 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 21:04:22,049 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c5e7d0>
2025-05-12 21:04:22,049 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x108c7e060> server_hostname='api.anthropic.com' timeout=None
2025-05-12 21:04:22,061 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1088ec9d0>
2025-05-12 21:04:22,061 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 21:04:22,061 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 21:04:22,061 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 21:04:22,062 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 21:04:22,062 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 21:04:23,027 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 13 May 2025 01:04:23 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-13T01:04:24Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-13T01:04:28Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-13T01:04:23Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-13T01:04:24Z'), (b'request-id', b'req_011CP4dVVMevweuT63wXCQQy'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ee3dca4b53e226-EWR')])
2025-05-12 21:04:23,027 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 21:04:23,028 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Tue, 13 May 2025 01:04:23 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-13T01:04:24Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-13T01:04:28Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-13T01:04:23Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-05-13T01:04:24Z', 'request-id': 'req_011CP4dVVMevweuT63wXCQQy', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ee3dca4b53e226-EWR'})
2025-05-12 21:04:23,028 - DEBUG - anthropic._base_client - request_id: req_011CP4dVVMevweuT63wXCQQy
2025-05-12 21:04:23,028 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 21:04:25,478 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 21:04:25,478 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 21:04:25,478 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 21:05:01,199 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 21:05:01,199 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk5ODkwfQ.mmM0-a-Hhc0387jA4BmEtl_1AedtTITL0HIiE-iqQQs'}
2025-05-12 21:05:01,215 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-05-12 21:05:01,216 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108c32a90>
2025-05-12 21:05:01,216 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 21:05:01,216 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 21:05:01,216 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 21:05:01,216 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 21:05:01,216 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 21:05:01,222 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Tue, 13 May 2025 01:05:00 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-05-12 21:05:01,222 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-05-12 21:05:01,222 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-05-12 21:05:01,222 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 21:05:01,224 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 21:05:01,224 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 21:05:01,225 - DEBUG - httpcore.connection - close.started
2025-05-12 21:05:01,225 - DEBUG - httpcore.connection - close.complete
2025-05-12 21:05:01,236 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-23320887-f907-4594-9c2f-5db57ea7626f', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'list my past 5 transactions over 25$'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-05-12 21:05:01,237 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-05-12 21:05:01,237 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-05-12 21:05:01,248 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108d117d0>
2025-05-12 21:05:01,248 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x108c7e7b0> server_hostname='api.anthropic.com' timeout=None
2025-05-12 21:05:01,266 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108cef090>
2025-05-12 21:05:01,266 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-05-12 21:05:01,266 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 21:05:01,266 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-05-12 21:05:01,266 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 21:05:01,266 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-05-12 21:05:04,770 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 13 May 2025 01:05:04 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-13T01:05:09Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-13T01:05:04Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-05-13T01:05:02Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'25000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-13T01:05:04Z'), (b'request-id', b'req_011CP4dYNzWAKVPnD4iJerPz'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93ee3ebf4863f965-EWR'), (b'Content-Encoding', b'gzip')])
2025-05-12 21:05:04,770 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-05-12 21:05:04,770 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-05-12 21:05:04,770 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-05-12 21:05:04,770 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 21:05:04,771 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 21:05:04,771 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Tue, 13 May 2025 01:05:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-13T01:05:09Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-13T01:05:04Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-05-13T01:05:02Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '25000', 'anthropic-ratelimit-tokens-reset': '2025-05-13T01:05:04Z', 'request-id': 'req_011CP4dYNzWAKVPnD4iJerPz', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '93ee3ebf4863f965-EWR', 'content-encoding': 'gzip'})
2025-05-12 21:05:04,771 - DEBUG - anthropic._base_client - request_id: req_011CP4dYNzWAKVPnD4iJerPz
2025-05-12 21:05:24,690 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-05-12 21:05:24,691 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ3MDk5ODkwfQ.mmM0-a-Hhc0387jA4BmEtl_1AedtTITL0HIiE-iqQQs'}
2025-05-12 21:05:24,706 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8000 local_address=None timeout=20 socket_options=None
2025-05-12 21:05:24,707 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108d25110>
2025-05-12 21:05:24,707 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-05-12 21:05:24,707 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-05-12 21:05:24,707 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-05-12 21:05:24,707 - DEBUG - httpcore.http11 - send_request_body.complete
2025-05-12 21:05:24,707 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-05-12 21:05:44,709 - DEBUG - httpcore.http11 - receive_response_headers.failed exception=ReadTimeout(TimeoutError('timed out'))
2025-05-12 21:05:44,710 - DEBUG - httpcore.http11 - response_closed.started
2025-05-12 21:05:44,710 - DEBUG - httpcore.http11 - response_closed.complete
2025-05-12 21:09:08,647 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 21:09:08,648 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-05-12 21:09:08,648 - DEBUG - multipart.multipart - Calling on_field_data with data[9:22]
2025-05-12 21:09:08,648 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 21:09:08,648 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-05-12 21:09:08,648 - DEBUG - multipart.multipart - Calling on_field_name with data[23:31]
2025-05-12 21:09:08,648 - DEBUG - multipart.multipart - Calling on_field_data with data[32:43]
2025-05-12 21:09:08,648 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-05-12 21:09:08,648 - DEBUG - multipart.multipart - Calling on_end with no data
2025-06-02 22:49:58,726 - INFO - orchestration.services.metrics_service - Metrics server started on port 8000
2025-06-02 22:49:58,726 - INFO - orchestration.services.task_scheduler - Starting task scheduler
2025-06-02 22:49:58,726 - INFO - orchestration.api.main - Task scheduler started
2025-06-02 22:53:08,676 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-06-02 22:53:08,676 - DEBUG - multipart.multipart - Calling on_field_name with data[0:8]
2025-06-02 22:53:08,676 - DEBUG - multipart.multipart - Calling on_field_data with data[9:24]
2025-06-02 22:53:08,677 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-06-02 22:53:08,677 - DEBUG - multipart.multipart - Calling on_field_start with no data
2025-06-02 22:53:08,677 - DEBUG - multipart.multipart - Calling on_field_name with data[25:33]
2025-06-02 22:53:08,677 - DEBUG - multipart.multipart - Calling on_field_data with data[34:47]
2025-06-02 22:53:08,677 - DEBUG - multipart.multipart - Calling on_field_end with no data
2025-06-02 22:53:08,677 - DEBUG - multipart.multipart - Calling on_end with no data
2025-06-02 22:53:20,858 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-06-02 22:53:20,859 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ4OTIwOTg5fQ.76MqBYcDE-_hTaJZVq930Tz72OeQFQN6hBrTdu66p8k'}
2025-06-02 22:53:20,871 - DEBUG - httpx - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-02 22:53:20,873 - DEBUG - httpx - load_verify_locations cafile='/opt/anaconda3/lib/python3.11/site-packages/certifi/cacert.pem'
2025-06-02 22:53:20,927 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-06-02 22:53:20,933 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1122bdc10>
2025-06-02 22:53:20,933 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-06-02 22:53:20,934 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-06-02 22:53:20,934 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-06-02 22:53:20,934 - DEBUG - httpcore.http11 - send_request_body.complete
2025-06-02 22:53:20,934 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-06-02 22:53:20,951 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Tue, 03 Jun 2025 02:53:20 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-06-02 22:53:20,951 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-06-02 22:53:20,952 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-06-02 22:53:20,952 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-06-02 22:53:20,952 - DEBUG - httpcore.http11 - response_closed.started
2025-06-02 22:53:20,952 - DEBUG - httpcore.http11 - response_closed.complete
2025-06-02 22:53:20,953 - DEBUG - httpcore.connection - close.started
2025-06-02 22:53:20,953 - DEBUG - httpcore.connection - close.complete
2025-06-02 22:53:20,963 - DEBUG - httpx - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-02 22:53:20,963 - DEBUG - httpx - load_verify_locations cafile='/opt/anaconda3/lib/python3.11/site-packages/certifi/cacert.pem'
2025-06-02 22:53:21,017 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-3ad430a8-06ee-4067-9019-625f949d5183', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'Show my last 5 transactions'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-06-02 22:53:21,045 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-06-02 22:53:21,047 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-06-02 22:53:21,089 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1122fcc10>
2025-06-02 22:53:21,089 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x112213140> server_hostname='api.anthropic.com' timeout=None
2025-06-02 22:53:21,103 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1122fcad0>
2025-06-02 22:53:21,103 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-06-02 22:53:21,103 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-06-02 22:53:21,103 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-06-02 22:53:21,103 - DEBUG - httpcore.http11 - send_request_body.complete
2025-06-02 22:53:21,103 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-06-02 22:53:25,096 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 03 Jun 2025 02:53:25 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-06-03T02:53:29Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-06-03T02:53:25Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-06-03T02:53:22Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-06-03T02:53:25Z'), (b'request-id', b'req_011CPkXnm6sZDcgGdHVzzdeW'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'949be6511ae92142-EWR'), (b'Content-Encoding', b'gzip')])
2025-06-02 22:53:25,097 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-06-02 22:53:25,098 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-06-02 22:53:25,099 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-06-02 22:53:25,099 - DEBUG - httpcore.http11 - response_closed.started
2025-06-02 22:53:25,099 - DEBUG - httpcore.http11 - response_closed.complete
2025-06-02 22:53:25,099 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Tue, 03 Jun 2025 02:53:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-06-03T02:53:29Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-06-03T02:53:25Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-06-03T02:53:22Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-06-03T02:53:25Z', 'request-id': 'req_011CPkXnm6sZDcgGdHVzzdeW', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '949be6511ae92142-EWR', 'content-encoding': 'gzip'})
2025-06-02 22:53:25,100 - DEBUG - anthropic._base_client - request_id: req_011CPkXnm6sZDcgGdHVzzdeW
2025-06-02 22:53:47,295 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-06-02 22:53:47,297 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ4OTIwOTg5fQ.76MqBYcDE-_hTaJZVq930Tz72OeQFQN6hBrTdu66p8k'}
2025-06-02 22:53:47,325 - DEBUG - httpx - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-02 22:53:47,327 - DEBUG - httpx - load_verify_locations cafile='/opt/anaconda3/lib/python3.11/site-packages/certifi/cacert.pem'
2025-06-02 22:53:47,368 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-06-02 22:53:47,370 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1122a0810>
2025-06-02 22:53:47,371 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'GET']>
2025-06-02 22:53:47,371 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-06-02 22:53:47,371 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'GET']>
2025-06-02 22:53:47,371 - DEBUG - httpcore.http11 - send_request_body.complete
2025-06-02 22:53:47,371 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'GET']>
2025-06-02 22:53:47,381 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Tue, 03 Jun 2025 02:53:46 GMT'), (b'server', b'uvicorn'), (b'content-length', b'5666'), (b'content-type', b'application/json')])
2025-06-02 22:53:47,381 - INFO - httpx - HTTP Request: GET http://localhost:8001/transactions?user_id=1 "HTTP/1.1 200 OK"
2025-06-02 22:53:47,382 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'GET']>
2025-06-02 22:53:47,382 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-06-02 22:53:47,382 - DEBUG - httpcore.http11 - response_closed.started
2025-06-02 22:53:47,382 - DEBUG - httpcore.http11 - response_closed.complete
2025-06-02 22:53:47,382 - DEBUG - httpcore.connection - close.started
2025-06-02 22:53:47,382 - DEBUG - httpcore.connection - close.complete
2025-06-02 22:53:47,384 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-90306127-5ad2-4ee0-9460-9fdc0516b672', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': "You are TaskFin, an intelligent financial assistant. The user has requested: 'Show my transactions above $100'.\nHere is the list of all their recent transactions as JSON:\n[{'id': 32, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:13:45.184107', 'status': 'completed', 'user_id': 1}, {'id': 31, 'account_id': 1, 'type': 'payment', 'amount': 20.0, 'description': 'Netflix Subscription', 'timestamp': '2025-05-04T14:08:45.293204', 'status': 'completed', 'user_id': 1}, {'id': 26, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:25:30.123297', 'status': 'completed', 'user_id': 1}, {'id': 21, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:25:30.121927', 'status': 'completed', 'user_id': 1}, {'id': 16, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:25:30.119310', 'status': 'completed', 'user_id': 1}, {'id': 11, 'account_id': 3, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for credit', 'timestamp': '2025-05-04T08:24:55.906212', 'status': 'completed', 'user_id': 1}, {'id': 6, 'account_id': 2, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for savings', 'timestamp': '2025-05-04T08:24:55.904094', 'status': 'completed', 'user_id': 1}, {'id': 1, 'account_id': 1, 'type': 'deposit', 'amount': 100.0, 'description': 'Demo transaction 1 for checking', 'timestamp': '2025-05-04T08:24:55.897988', 'status': 'completed', 'user_id': 1}, {'id': 27, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:25:30.123332', 'status': 'completed', 'user_id': 1}, {'id': 22, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:25:30.121960', 'status': 'completed', 'user_id': 1}, {'id': 17, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:25:30.119379', 'status': 'completed', 'user_id': 1}, {'id': 12, 'account_id': 3, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for credit', 'timestamp': '2025-05-03T08:24:55.906239', 'status': 'completed', 'user_id': 1}, {'id': 7, 'account_id': 2, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for savings', 'timestamp': '2025-05-03T08:24:55.904137', 'status': 'completed', 'user_id': 1}, {'id': 2, 'account_id': 1, 'type': 'payment', 'amount': 110.0, 'description': 'Demo transaction 2 for checking', 'timestamp': '2025-05-03T08:24:55.898038', 'status': 'completed', 'user_id': 1}, {'id': 28, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:25:30.123347', 'status': 'completed', 'user_id': 1}, {'id': 23, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:25:30.121975', 'status': 'completed', 'user_id': 1}, {'id': 18, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:25:30.119405', 'status': 'completed', 'user_id': 1}, {'id': 13, 'account_id': 3, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for credit', 'timestamp': '2025-05-02T08:24:55.906253', 'status': 'completed', 'user_id': 1}, {'id': 8, 'account_id': 2, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for savings', 'timestamp': '2025-05-02T08:24:55.904153', 'status': 'completed', 'user_id': 1}, {'id': 3, 'account_id': 1, 'type': 'deposit', 'amount': 120.0, 'description': 'Demo transaction 3 for checking', 'timestamp': '2025-05-02T08:24:55.898056', 'status': 'completed', 'user_id': 1}, {'id': 29, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:25:30.123359', 'status': 'completed', 'user_id': 1}, {'id': 24, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:25:30.121997', 'status': 'completed', 'user_id': 1}, {'id': 19, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:25:30.119419', 'status': 'completed', 'user_id': 1}, {'id': 14, 'account_id': 3, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for credit', 'timestamp': '2025-05-01T08:24:55.906264', 'status': 'completed', 'user_id': 1}, {'id': 9, 'account_id': 2, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for savings', 'timestamp': '2025-05-01T08:24:55.904167', 'status': 'completed', 'user_id': 1}, {'id': 4, 'account_id': 1, 'type': 'payment', 'amount': 130.0, 'description': 'Demo transaction 4 for checking', 'timestamp': '2025-05-01T08:24:55.898087', 'status': 'completed', 'user_id': 1}, {'id': 30, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:25:30.123370', 'status': 'completed', 'user_id': 1}, {'id': 25, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:25:30.122011', 'status': 'completed', 'user_id': 1}, {'id': 20, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:25:30.119436', 'status': 'completed', 'user_id': 1}, {'id': 15, 'account_id': 3, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for credit', 'timestamp': '2025-04-30T08:24:55.906275', 'status': 'completed', 'user_id': 1}, {'id': 10, 'account_id': 2, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for savings', 'timestamp': '2025-04-30T08:24:55.904179', 'status': 'completed', 'user_id': 1}, {'id': 5, 'account_id': 1, 'type': 'deposit', 'amount': 140.0, 'description': 'Demo transaction 5 for checking', 'timestamp': '2025-04-30T08:24:55.898116', 'status': 'completed', 'user_id': 1}]\nPlease select, filter, and format the transactions according to the user's request. Return the result as a markdown table with columns Date, Description, Amount, Status. If no transactions match, say so."}], 'model': 'claude-3-7-sonnet-20250219', 'stream': False}}
2025-06-02 22:53:47,385 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-06-02 22:53:47,385 - DEBUG - httpcore.connection - close.started
2025-06-02 22:53:47,386 - DEBUG - httpcore.connection - close.complete
2025-06-02 22:53:47,386 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-06-02 22:53:47,394 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x112529590>
2025-06-02 22:53:47,394 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x112213140> server_hostname='api.anthropic.com' timeout=None
2025-06-02 22:53:47,406 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x112529490>
2025-06-02 22:53:47,407 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-06-02 22:53:47,407 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-06-02 22:53:47,407 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-06-02 22:53:47,407 - DEBUG - httpcore.http11 - send_request_body.complete
2025-06-02 22:53:47,407 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-06-02 22:53:56,733 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 03 Jun 2025 02:53:57 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-06-03T02:53:56Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-06-03T02:53:56Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-06-03T02:53:49Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-06-03T02:53:56Z'), (b'request-id', b'req_011CPkXphYruqzShPx7CR3pM'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'949be6f57c85da8d-EWR'), (b'Content-Encoding', b'gzip')])
2025-06-02 22:53:56,736 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-06-02 22:53:56,736 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-06-02 22:53:56,737 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-06-02 22:53:56,737 - DEBUG - httpcore.http11 - response_closed.started
2025-06-02 22:53:56,737 - DEBUG - httpcore.http11 - response_closed.complete
2025-06-02 22:53:56,737 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Tue, 03 Jun 2025 02:53:57 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-06-03T02:53:56Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-06-03T02:53:56Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-06-03T02:53:49Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-06-03T02:53:56Z', 'request-id': 'req_011CPkXphYruqzShPx7CR3pM', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '949be6f57c85da8d-EWR', 'content-encoding': 'gzip'})
2025-06-02 22:53:56,738 - DEBUG - anthropic._base_client - request_id: req_011CPkXphYruqzShPx7CR3pM
2025-06-02 22:54:35,368 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-06-02 22:54:35,369 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ4OTIwOTg5fQ.76MqBYcDE-_hTaJZVq930Tz72OeQFQN6hBrTdu66p8k'}
2025-06-02 22:54:35,373 - DEBUG - httpx - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-02 22:54:35,404 - DEBUG - httpx - load_verify_locations cafile='/opt/anaconda3/lib/python3.11/site-packages/certifi/cacert.pem'
2025-06-02 22:54:35,467 - DEBUG - httpcore.connection - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10 socket_options=None
2025-06-02 22:54:35,469 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x112528450>
2025-06-02 22:54:35,469 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-06-02 22:54:35,470 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-06-02 22:54:35,470 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-06-02 22:54:35,470 - DEBUG - httpcore.http11 - send_request_body.complete
2025-06-02 22:54:35,470 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-06-02 22:54:35,522 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'date', b'Tue, 03 Jun 2025 02:54:34 GMT'), (b'server', b'uvicorn'), (b'content-length', b'30'), (b'content-type', b'application/json')])
2025-06-02 22:54:35,523 - INFO - httpx - HTTP Request: POST http://localhost:8001/transactions/payment "HTTP/1.1 404 Not Found"
2025-06-02 22:54:35,523 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-06-02 22:54:35,523 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-06-02 22:54:35,523 - DEBUG - httpcore.http11 - response_closed.started
2025-06-02 22:54:35,523 - DEBUG - httpcore.http11 - response_closed.complete
2025-06-02 22:54:35,524 - DEBUG - httpcore.connection - close.started
2025-06-02 22:54:35,524 - DEBUG - httpcore.connection - close.complete
2025-06-02 22:55:13,166 - INFO - root - [CHAT] Authenticated user: 123@gmail.com, id: 1
2025-06-02 22:55:13,178 - INFO - root - [CHAT] Context set: {'user_id': 1, 'session_id': 1, 'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjNAZ21haWwuY29tIiwiZXhwIjoxNzQ4OTIwOTg5fQ.76MqBYcDE-_hTaJZVq930Tz72OeQFQN6hBrTdu66p8k'}
2025-06-02 22:55:13,264 - DEBUG - httpx - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-02 22:55:13,270 - DEBUG - httpx - load_verify_locations cafile='/opt/anaconda3/lib/python3.11/site-packages/certifi/cacert.pem'
2025-06-02 22:55:13,345 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-050367b7-0f09-4f65-94e1-4cfec6ea64ef', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'How much do I have in savings\n'}], 'model': 'claude-3-7-sonnet-20250219', 'stop_sequences': ['\nObservation'], 'stream': True, 'system': "\n            You are TaskFin, an intelligent, friendly financial assistant. Your name is TaskFin. Never say you are Claude, Anthropic, or any other AI model. Always answer as TaskFin. If the user asks about your identity, say: 'I am TaskFin, your financial assistant.'\n            You help users with financial tasks (like accounts, payments, payees, subscriptions), but you are also capable of general conversation, small talk, and answering questions about yourself or the world. Always be clear, helpful, and conversational. If the user asks something unrelated to finance, respond naturally and engagingly.\n            \n            You have access to the following tools:\n            delegate_to_financial_agent(task) - Delegate financial tasks to the financial agent\nadd_payee(name: str, type: str = 'friend', email: str = '', phone: str = '', account_number: str = '', bank_name: str = '') -> str - Add a new payee (friend or organization) to the user's payee list\nmake_payment(account_id: str, payee_id: str, amount: float, description: str = '', is_recurring: bool = False, frequency: str = None, end_date: str = None) -> str - Make a payment to a payee from a specified account. Always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\nlist_payees(_: str = '') -> str - List all payees for the current user.\nget_conversation_context(_: str) -> str - Get the current conversation context\nauthenticate_user(username_password) - Authenticate a user with username and password. Input should be 'username,password'\nvalidate_session(access_token: str) -> str - Validate a user session using the access token.\n            Tool names: delegate_to_financial_agent, add_payee, make_payment, list_payees, get_conversation_context, authenticate_user, validate_session\n            \n            When making a payment, always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\n            \n            When you need to use a tool, use the following format:\n            Thought: [your reasoning here]\n            Action: [the tool name, from the list above]\n            Action Input: [the input to the tool]\n            \n            When you want to respond directly to the user, use:\n            Thought: [your reasoning here]\n            Final Answer: [your response here]\n            \n            IMPORTANT:\n            - Only take ONE step at a time.\n            - If you use Action, output ONLY one Action and Action Input, and nothing else.\n            - If you use Final Answer, output ONLY the Final Answer and nothing else.\n            - Do NOT output multiple Actions or both Action and Final Answer in the same response.\n            - If the user asks a general, personal, or small talk question, respond conversationally and do not mention financial tools unless relevant.\n            "}}
2025-06-02 22:55:13,346 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-06-02 22:55:13,347 - DEBUG - httpcore.connection - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]
2025-06-02 22:55:13,355 - DEBUG - httpcore.connection - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11255c8d0>
2025-06-02 22:55:13,355 - DEBUG - httpcore.connection - start_tls.started ssl_context=<ssl.SSLContext object at 0x11254c680> server_hostname='api.anthropic.com' timeout=None
2025-06-02 22:55:13,369 - DEBUG - httpcore.connection - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11222f950>
2025-06-02 22:55:13,370 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-06-02 22:55:13,370 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-06-02 22:55:13,370 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-06-02 22:55:13,370 - DEBUG - httpcore.http11 - send_request_body.complete
2025-06-02 22:55:13,371 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-06-02 22:55:14,562 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 03 Jun 2025 02:55:14 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-06-03T02:55:16Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-06-03T02:55:20Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-06-03T02:55:14Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-06-03T02:55:16Z'), (b'request-id', b'req_011CPkXw381UmHkzUMgU3MSN'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'949be90ece285e4b-EWR')])
2025-06-02 22:55:14,564 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-06-02 22:55:14,564 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Tue, 03 Jun 2025 02:55:14 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-06-03T02:55:16Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-06-03T02:55:20Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-06-03T02:55:14Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-06-03T02:55:16Z', 'request-id': 'req_011CPkXw381UmHkzUMgU3MSN', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '949be90ece285e4b-EWR'})
2025-06-02 22:55:14,564 - DEBUG - anthropic._base_client - request_id: req_011CPkXw381UmHkzUMgU3MSN
2025-06-02 22:55:14,565 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-06-02 22:55:15,690 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-06-02 22:55:15,694 - DEBUG - httpcore.http11 - response_closed.started
2025-06-02 22:55:15,701 - DEBUG - httpcore.http11 - response_closed.complete
2025-06-02 22:55:15,725 - DEBUG - anthropic._base_client - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-2191a8b2-b758-40e9-adda-13c6af5cb873', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'How much do I have in savings\nThought: The user is asking about their savings account balance. I don\'t currently have information about their accounts or balances. I need to check if the user is already authenticated before I can access their financial information. I should use the get_conversation_context tool to see if there\'s any existing session information.\n\nAction: get_conversation_context\nAction Input: ""\nObservation: {\'history\': \'\'}\nThought: '}], 'model': 'claude-3-7-sonnet-20250219', 'stop_sequences': ['\nObservation'], 'stream': True, 'system': "\n            You are TaskFin, an intelligent, friendly financial assistant. Your name is TaskFin. Never say you are Claude, Anthropic, or any other AI model. Always answer as TaskFin. If the user asks about your identity, say: 'I am TaskFin, your financial assistant.'\n            You help users with financial tasks (like accounts, payments, payees, subscriptions), but you are also capable of general conversation, small talk, and answering questions about yourself or the world. Always be clear, helpful, and conversational. If the user asks something unrelated to finance, respond naturally and engagingly.\n            \n            You have access to the following tools:\n            delegate_to_financial_agent(task) - Delegate financial tasks to the financial agent\nadd_payee(name: str, type: str = 'friend', email: str = '', phone: str = '', account_number: str = '', bank_name: str = '') -> str - Add a new payee (friend or organization) to the user's payee list\nmake_payment(account_id: str, payee_id: str, amount: float, description: str = '', is_recurring: bool = False, frequency: str = None, end_date: str = None) -> str - Make a payment to a payee from a specified account. Always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\nlist_payees(_: str = '') -> str - List all payees for the current user.\nget_conversation_context(_: str) -> str - Get the current conversation context\nauthenticate_user(username_password) - Authenticate a user with username and password. Input should be 'username,password'\nvalidate_session(access_token: str) -> str - Validate a user session using the access token.\n            Tool names: delegate_to_financial_agent, add_payee, make_payment, list_payees, get_conversation_context, authenticate_user, validate_session\n            \n            When making a payment, always ask the user if they want to use an existing account or add a new one, and if they want to pay an existing payee or add a new payee. Guide the user to provide any missing details.\n            \n            When you need to use a tool, use the following format:\n            Thought: [your reasoning here]\n            Action: [the tool name, from the list above]\n            Action Input: [the input to the tool]\n            \n            When you want to respond directly to the user, use:\n            Thought: [your reasoning here]\n            Final Answer: [your response here]\n            \n            IMPORTANT:\n            - Only take ONE step at a time.\n            - If you use Action, output ONLY one Action and Action Input, and nothing else.\n            - If you use Final Answer, output ONLY the Final Answer and nothing else.\n            - Do NOT output multiple Actions or both Action and Final Answer in the same response.\n            - If the user asks a general, personal, or small talk question, respond conversationally and do not mention financial tools unless relevant.\n            "}}
2025-06-02 22:55:15,725 - DEBUG - anthropic._base_client - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-06-02 22:55:15,726 - DEBUG - httpcore.http11 - send_request_headers.started request=<Request [b'POST']>
2025-06-02 22:55:15,726 - DEBUG - httpcore.http11 - send_request_headers.complete
2025-06-02 22:55:15,726 - DEBUG - httpcore.http11 - send_request_body.started request=<Request [b'POST']>
2025-06-02 22:55:15,726 - DEBUG - httpcore.http11 - send_request_body.complete
2025-06-02 22:55:15,726 - DEBUG - httpcore.http11 - receive_response_headers.started request=<Request [b'POST']>
2025-06-02 22:55:17,823 - DEBUG - httpcore.http11 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 03 Jun 2025 02:55:18 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-06-03T02:55:18Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-06-03T02:55:22Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-06-03T02:55:17Z'), (b'anthropic-ratelimit-tokens-limit', b'28000'), (b'anthropic-ratelimit-tokens-remaining', b'26000'), (b'anthropic-ratelimit-tokens-reset', b'2025-06-03T02:55:18Z'), (b'request-id', b'req_011CPkXwDCjR4wSMtTAXCYwA'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'69605831-02d7-49cc-8cf5-2dd86614c286'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'949be91d7a715e4b-EWR')])
2025-06-02 22:55:17,824 - INFO - httpx - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-06-02 22:55:17,824 - DEBUG - anthropic._base_client - HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Tue, 03 Jun 2025 02:55:18 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-06-03T02:55:18Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-06-03T02:55:22Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-06-03T02:55:17Z', 'anthropic-ratelimit-tokens-limit': '28000', 'anthropic-ratelimit-tokens-remaining': '26000', 'anthropic-ratelimit-tokens-reset': '2025-06-03T02:55:18Z', 'request-id': 'req_011CPkXwDCjR4wSMtTAXCYwA', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '69605831-02d7-49cc-8cf5-2dd86614c286', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '949be91d7a715e4b-EWR'})
2025-06-02 22:55:17,824 - DEBUG - anthropic._base_client - request_id: req_011CPkXwDCjR4wSMtTAXCYwA
2025-06-02 22:55:17,825 - DEBUG - httpcore.http11 - receive_response_body.started request=<Request [b'POST']>
2025-06-02 22:55:19,447 - DEBUG - httpcore.http11 - receive_response_body.complete
2025-06-02 22:55:19,448 - DEBUG - httpcore.http11 - response_closed.started
2025-06-02 22:55:19,448 - DEBUG - httpcore.http11 - response_closed.complete
